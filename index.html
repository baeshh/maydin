<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메이딘(MEIDIN) | 프리미엄 건강기능식품</title>
    <!-- Kakao Map API (JavaScript 키) -->
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=87f6c996d0f83fd42534d1a8a391e6b0&libraries=services"></script>
    <!-- Kakao 로그인 SDK (간편 로그인/회원가입) -->
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.9/kakao.min.js" crossorigin="anonymous"></script>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

        :root {
            --primary: #135B42;
            --primary-hover: #0F4A35;
            --text-dark: #111111;
            --text-gray: #666666;
            --bg-light: #F4F6F5;
            --border-color: #E5E7EB;
            --container-width: 1300px;
            --accent: #135B42;
            --white-on-accent: #fff;
            --main: #111111;
            --text-main: #111111;
            --glass: rgba(255,255,255,0.9);
        }
        /* 데스크톱: 적당한 양측 여백 (눈이 벌어지지 않도록) */
        @media (min-width: 769px) {
            :root { --container-width: 100%; }
            .nav-inner { max-width: 100%; padding: 0 48px; }
            .container { max-width: 100%; padding: 100px 48px; }
            .hero-section { padding: 100px 48px 0; }
            .hero-banner { max-width: 100%; }
            .footer-inner { max-width: 100%; padding: 0 48px; }
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        body { font-family: 'Pretendard', sans-serif; color: var(--text-dark); background: #fff; line-height: 1.5; overflow-x: hidden; }
        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }

        /* 1. Navigation */
        header {
            position: fixed; top: 0; width: 100%; height: 80px;
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            z-index: 1000; display: flex; justify-content: center;
        }
        .nav-inner {
            width: 100%; max-width: var(--container-width); padding: 0 20px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { display: flex; align-items: center; cursor: pointer; }
        .logo img { height: 56px; width: auto; display: block; object-fit: contain; }

        .nav-menu { display: flex; gap: 40px; font-weight: 700; font-size: 0.95rem; align-items: center; }
        .nav-menu a:hover { color: var(--primary); }
        .nav-item { position: relative; }
        .nav-item .nav-trigger { background: none; border: none; font: inherit; cursor: pointer; color: inherit; font-weight: 700; }
        .nav-item .nav-trigger::after { content: ''; display: inline-block; margin-left: 4px; border: 5px solid transparent; border-top-color: currentColor; vertical-align: middle; }
        .nav-dropdown { position: absolute; top: 100%; left: 0; min-width: 180px; background: #fff; border-radius: 12px; box-shadow: 0 12px 40px rgba(0,0,0,0.12); border: 1px solid var(--border-color); padding: 10px 0; opacity: 0; visibility: hidden; transform: translateY(-6px); transition: 0.2s; z-index: 1001; }
        .nav-item:hover .nav-dropdown { opacity: 1; visibility: visible; transform: translateY(0); }
        .nav-dropdown a { display: block; padding: 10px 20px; font-size: 0.85rem; font-weight: 600; color: var(--text-dark); }
        .nav-dropdown a:hover { background: var(--bg-light); color: var(--primary); }

        .nav-utils { display: flex; gap: 10px; align-items: center; font-size: 0.8rem; font-weight: 600; }
        .nav-utils a, .nav-utils button { padding: 8px 16px; border-radius: 50px; border: 1px solid var(--border-color); color: var(--text-gray); transition: 0.2s; background: transparent; cursor: pointer; font: inherit; }
        .nav-utils a:hover, .nav-utils button:hover { background: var(--bg-light); color: var(--text-dark); }
        .nav-utils a.highlight, .nav-utils .pharmacy-link { border-color: var(--primary); color: var(--primary); }
        .nav-utils a.highlight:hover, .nav-utils .pharmacy-link:hover { background: var(--primary); color: #fff; }
        .nav-auth { display: flex; align-items: center; gap: 8px; }
        .nav-auth .auth-divider { color: var(--border-color); user-select: none; }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .user-name { font-weight: 700; color: var(--primary); font-size: 0.8rem; }
        .logout-btn { padding: 6px 14px; border-radius: 50px; font-size: 0.75rem; border: 1px solid var(--border-color); background: transparent; cursor: pointer; }
        .logout-btn:hover { border-color: var(--primary); color: var(--primary); }

        @media (max-width: 768px) {
            .nav-menu { gap: 16px; font-size: 0.8rem; }
            .nav-utils { font-size: 0.75rem; }
            .logo img { height: 44px; }
            .nav-links { gap: 10px; flex-wrap: wrap; }
            .nav-item > a, .nav-item .nav-trigger { font-size: 0.75rem; padding: 6px 2px; }
            .nav-dropdown { min-width: 160px; padding: 8px 0; }
            .nav-dropdown a { padding: 8px 16px; font-size: 0.8rem; }
            .nav-links a { font-size: 0.75rem; }
            .nav-links .pharmacy-link { padding: 6px 14px; font-size: 0.75rem; }
            .nav-auth, .nav-links .login-btn { font-size: 0.75rem; }
            .nav-links .user-name { font-size: 0.65rem; }
            .nav-links .logout-btn { padding: 5px 12px; font-size: 0.65rem; }
            .modal { padding: 30px 20px; }
        }

        /* 공통 컨테이너 & 버튼 */
        .container { width: 100%; max-width: var(--container-width); margin: 0 auto; padding: 100px 20px; }
        .btn-pill { display: inline-flex; align-items: center; gap: 10px; padding: 12px 24px; border-radius: 50px; border: 1px solid var(--border-color); font-size: 0.9rem; font-weight: 600; background: #fff; color: var(--text-dark); transition: 0.2s; cursor: pointer; font-family: inherit; text-decoration: none; }
        .btn-pill:hover { background: var(--bg-light); border-color: var(--primary); color: var(--primary); }

        /* 2. Hero Slider Section (4 cards) */
        .hero-section { padding-top: 100px; }
        .hero-banner {
            max-width: var(--container-width); margin: 0 auto;
            height: 600px; border-radius: 24px; overflow: hidden;
            position: relative;
        }
        .hero-slides { position: absolute; inset: 0; }
        .hero-slide {
            position: absolute; inset: 0;
            background-size: cover; background-position: center;
            display: flex; align-items: center; padding: 0 80px;
            opacity: 0; visibility: hidden; transition: opacity 0.6s ease, visibility 0.6s;
        }
        .hero-slide.active { opacity: 1; visibility: visible; z-index: 1; }
        .hero-slide::before { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; background: linear-gradient(to right, rgba(19, 91, 66, 0.82) 0%, rgba(0,0,0,0.15) 100%); z-index: 0; }
        .hero-content { position: relative; z-index: 2; color: #fff; }
        .hero-content span { font-weight: 700; font-size: 1rem; margin-bottom: 15px; display: block; letter-spacing: 1px; }
        .hero-content h2 { font-size: 3.5rem; font-weight: 800; line-height: 1.3; margin-bottom: 40px; letter-spacing: -1px; }
        .hero-content .btn-pill { background: transparent; border-color: #fff; color: #fff; }
        .hero-content .btn-pill:hover { background: #fff; color: var(--primary); }
        .slider-dots { position: absolute; bottom: 30px; right: 50px; z-index: 3; display: flex; gap: 8px; }
        .slider-dots .dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(255,255,255,0.4); cursor: pointer; transition: 0.3s; border: none; padding: 0; }
        .slider-dots .dot:hover { background: rgba(255,255,255,0.7); }
        .slider-dots .dot.active { width: 24px; border-radius: 4px; background: #fff; }

        /* 3. About Section */
        .about-section { display: flex; align-items: center; justify-content: space-between; gap: 60px; }
        .about-text { flex: 1; }
        .about-text .sub-title { color: var(--primary); font-weight: 800; font-size: 0.9rem; margin-bottom: 15px; display: block; }
        .about-text h2 { font-size: 2.8rem; font-weight: 800; line-height: 1.3; margin-bottom: 25px; letter-spacing: -1px; }
        .about-text p { font-size: 1.05rem; color: var(--text-gray); margin-bottom: 40px; }
        .about-image { flex: 1.2; height: 450px; border-radius: 24px; overflow: hidden; background: #eee; }
        .about-image img { width: 100%; height: 100%; object-fit: cover; }

        /* 4. Product Section */
        .bg-gray-section { background-color: var(--bg-light); }
        .section-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 40px; }
        .section-header h2 { font-size: 2.2rem; font-weight: 800; }
        .product-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; }
        .product-card { background: #fff; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.02); border: 1px solid var(--border-color); transition: 0.3s; cursor: pointer; }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(19, 91, 66, 0.08); border-color: var(--primary); }
        .product-visual { height: 250px; background: #F8FAF9; display: flex; justify-content: center; align-items: center; padding: 30px; border-bottom: 1px solid var(--border-color); }
        .product-visual img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .product-info { padding: 30px 25px; }
        .product-info .category { color: var(--primary); font-weight: 700; font-size: 0.8rem; margin-bottom: 8px; display: block; }
        .product-info h3 { font-size: 1.3rem; font-weight: 800; margin-bottom: 10px; }
        .product-info p { font-size: 0.9rem; color: var(--text-gray); line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

        /* 시그니처 단일 제품 (센시비) */
        .signature-product {
            display: flex;
            background: #fff;
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 40px rgba(0,0,0,0.03);
        }
        .sig-visual {
            flex: 1;
            background: var(--bg-light);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 450px;
        }
        .sig-visual img {
            width: 70%;
            height: auto;
            object-fit: contain;
            transition: transform 0.5s ease;
        }
        .sig-visual:hover img { transform: scale(1.05); }
        .badge-wrap {
            position: absolute;
            top: 30px; left: 30px;
            display: flex; gap: 10px;
        }
        .badge {
            padding: 6px 14px;
            background: var(--primary);
            color: #fff;
            font-size: 0.8rem;
            font-weight: 700;
            border-radius: 50px;
        }
        .badge.outline {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        .sig-info {
            flex: 1.2;
            padding: 60px 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .sig-info .sub-label {
            font-size: 0.85rem;
            font-weight: 800;
            color: var(--text-gray);
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        .sig-info h3 {
            font-size: 3rem;
            font-weight: 900;
            color: var(--text-dark);
            margin-bottom: 20px;
            letter-spacing: -1px;
        }
        .sig-info .desc {
            font-size: 1.1rem;
            color: var(--text-gray);
            line-height: 1.6;
            margin-bottom: 40px;
        }
        .sig-specs {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
            padding-top: 0;
        }
        .sig-specs .spec-item { border: none; }
        .sig-sub-specs {
            display: flex;
            align-items: center;
            gap: 12px 24px;
            margin-top: -24px;
            margin-bottom: 32px;
            padding-top: 12px;
            border-top: 1px solid rgba(0,0,0,0.06);
        }
        .sig-sub-specs .sub-label {
            font-size: 0.8rem;
            color: var(--text-gray);
            font-weight: 600;
            flex-shrink: 0;
        }
        .sig-sub-specs .sub-items {
            display: flex;
            flex-wrap: wrap;
            gap: 8px 16px;
        }
        .sig-sub-specs .sub-items span {
            font-size: 0.85rem;
            color: var(--text-gray);
        }
        @media (max-width: 900px) {
            .sig-sub-specs { flex-direction: column; align-items: flex-start; gap: 8px; margin-top: -16px; }
        }
        .spec-item strong {
            display: block;
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 5px;
        }
        .spec-item span {
            font-size: 0.9rem;
            color: var(--text-gray);
            line-height: 1.4;
        }
        .sig-actions { display: flex; gap: 15px; }
        .sig-btn-primary {
            padding: 16px 32px;
            background: var(--primary);
            color: #fff;
            font-weight: 700;
            border-radius: 50px;
            transition: 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        .sig-btn-primary:hover { background: var(--primary-hover); color: #fff; }
        .sig-btn-secondary {
            padding: 16px 32px;
            background: #fff;
            color: var(--text-dark);
            font-weight: 600;
            border: 1px solid var(--border-color);
            border-radius: 50px;
            transition: 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        .sig-btn-secondary:hover { background: var(--bg-light); }
        @media (max-width: 900px) {
            .signature-product { flex-direction: column; }
            .sig-visual { min-height: 350px; }
            .sig-info { padding: 40px 30px; }
            .sig-specs { grid-template-columns: 1fr; gap: 15px; }
            .sig-actions { flex-direction: column; }
            .sig-btn-primary, .sig-btn-secondary { text-align: center; }
        }

        /* 5. Blog Section */
        .blog-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; }
        .blog-card { border-radius: 16px; overflow: hidden; border: 1px solid var(--border-color); background: #fff; transition: 0.3s; cursor: pointer; text-decoration: none; color: inherit; }
        .blog-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.05); }
        .blog-img { height: 220px; background: #eee; }
        .blog-img img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .blog-card:hover .blog-img img { transform: scale(1.05); }
        .blog-text { padding: 25px; }
        .blog-text .tag { display: inline-block; padding: 4px 10px; background: var(--primary); color: #fff; font-size: 0.75rem; font-weight: 700; border-radius: 4px; margin-bottom: 15px; }
        .blog-text h3 { font-size: 1.1rem; font-weight: 700; line-height: 1.4; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .blog-text .date { font-size: 0.85rem; color: var(--text-gray); font-weight: 500; }

        /* 6. Footer */
        footer { background: #111; color: #fff; padding: 80px 0; }
        .footer-inner { max-width: var(--container-width); margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: flex-start; }
        .footer-logo { font-size: 1.8rem; font-weight: 900; margin-bottom: 32px; color: #fff; }
        .footer-info p { font-size: 0.9rem; color: #aaa; line-height: 2; margin-bottom: 16px; }
        .footer-info p:last-child { margin-bottom: 0; }
        .footer-info .footer-copyright { margin-top: 40px; color: #777; }
        .footer-info strong { color: #ddd; }
        .btn-top { padding: 10px 20px; border: 1px solid #444; border-radius: 50px; color: #fff; font-size: 0.8rem; cursor: pointer; background: transparent; transition: 0.2s; font-family: inherit; }
        .btn-top:hover { background: #fff; color: #111; }

        @media (max-width: 900px) {
            .product-grid { grid-template-columns: repeat(2, 1fr); }
            .blog-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 600px) {
            .about-section { flex-direction: column; }
            .about-image { height: 280px; }
            .product-grid, .blog-grid { grid-template-columns: 1fr; }
            .hero-banner { padding: 0 30px; height: 500px; }
            .hero-content h2 { font-size: 2.2rem; }
        }

        /* (legacy) 스태킹 카드 제거용 유지 */
        .stack-container { 
            padding: 0 4%; 
            max-width: 1400px; 
            margin: 0 auto;
            position: relative;
        }
        
        .stack-card {
            position: sticky; 
            top: 100px;
            width: 100%; 
            height: 75vh;
            background: var(--glass); 
            backdrop-filter: blur(40px);
            border-radius: 40px; 
            border: 1px solid rgba(0, 0, 0, 0.05);
            margin-bottom: 25vh;
            padding: clamp(30px, 5vw, 70px);
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 30px;
            box-shadow: 0 40px 100px rgba(0,0,0,0.05);
            overflow: hidden;
            /* 애니메이션의 핵심: 변환 중심점 설정 */
            transform-origin: center center;
            transition: transform 0.1s linear, opacity 0.1s linear, filter 0.1s linear;
        }

        /* 모바일 대응: 카드를 1열로 전환 */
        @media (max-width: 850px) {
            .stack-card { grid-template-columns: 1fr; min-height: auto; padding: 40px 30px; }
            .visual-box { height: 200px; order: -1; } /* 이미지를 텍스트 위로 */
            .hero h1 { line-height: 1.1; }
            .click-hint {
                font-size: 0.75rem;
                padding: 8px 16px;
                margin-top: 15px;
            }
            .visual-box.clickable-hint::after {
                font-size: 0.6rem;
                bottom: 10px;
            }
        }

        .card-content { display: flex; flex-direction: column; justify-content: center; }
        .card-content span { font-weight: 800; color: var(--accent); font-size: 0.8rem; margin-bottom: 15px; }
        .card-content h2 { font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 800; line-height: 1.2; margin-bottom: 20px; letter-spacing: -0.03em; }
        .card-content p { font-size: clamp(1rem, 1.5vw, 1.15rem); color: var(--text-main); opacity: 0.7; line-height: 1.7; }

        .visual-box {
            background: rgba(255,255,255,0.4); border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.7rem; letter-spacing: 3px; font-weight: 600; color: var(--accent);
            border: 1px solid rgba(0,0,0,0.03);
        }
        .stack-card.clickable {
            cursor: pointer;
            position: relative;
            /* 스크롤 효과와 hover 효과가 함께 작동하도록 transition 설정 */
            transition: transform 0.4s ease-out, box-shadow 0.4s ease-out, filter 0.4s ease-out, opacity 0.4s ease-out;
        }
        .stack-card.clickable::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 32px;
            border: 2px solid var(--accent);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 1;
        }
        .stack-card.clickable:hover::before {
            opacity: 0.3;
        }
        /* hover 효과는 JavaScript에서 처리하므로 CSS에서는 box-shadow만 */
        .stack-card.clickable:hover {
            box-shadow: 0 50px 100px rgba(0,0,0,0.15);
        }
        .click-hint {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 20px;
            padding: 10px 20px;
            background: rgba(45, 90, 76, 0.1);
            border: 1px solid rgba(45, 90, 76, 0.2);
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent);
            animation: pulse 2s infinite;
            cursor: pointer;
        }
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }
        .click-hint-icon {
            display: inline-block;
            animation: bounce 1.5s infinite;
        }
        @keyframes bounce {
            0%, 100% {
                transform: translateX(0);
            }
            50% {
                transform: translateX(5px);
            }
        }
        .click-hint-outline {
            background: transparent !important;
            border: 2px solid rgba(45, 90, 76, 0.5);
        }
        .click-hint-outline:hover {
            background: rgba(45, 90, 76, 0.08) !important;
        }
        .visual-box-img {
            padding: 20px;
            min-height: 320px;
        }
        .visual-box-img img {
            width: 100%;
            height: 100%;
            min-height: 280px;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 12px;
            display: block;
        }
        .visual-box.clickable-hint {
            position: relative;
            overflow: hidden;
        }
        .visual-box.clickable-hint::after {
            content: '클릭하여 상세보기 →';
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.65rem;
            letter-spacing: 2px;
            opacity: 0.9;
            font-weight: 700;
            white-space: nowrap;
        }

        /* 5. 약사전용몰 섹션 */
        .pharmacy-section {
            padding: 120px 4% 80px;
            max-width: 1400px; margin: 0 auto;
            background: linear-gradient(to bottom, var(--bg) 0%, rgba(45, 90, 76, 0.02) 100%);
            display: none;
        }
        .pharmacy-section.active {
            display: block;
        }

        .pharmacy-header {
            text-align: center; margin-bottom: 60px;
        }
        .pharmacy-header span {
            display: inline-block;
            font-weight: 800; color: var(--accent); font-size: 0.8rem;
            letter-spacing: 0.3em; margin-bottom: 20px;
        }
        .pharmacy-header h2 {
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 900; letter-spacing: -0.03em;
            margin-bottom: 15px;
        }
        .pharmacy-header p {
            font-size: clamp(1rem, 1.5vw, 1.15rem);
            opacity: 0.6; max-width: 600px; margin: 0 auto;
        }

        /* 로그인 모달 */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        .modal-overlay.active {
            display: flex;
        }
        .modal {
            background: var(--glass);
            backdrop-filter: blur(40px);
            border-radius: 32px;
            border: 1px solid rgba(255,255,255,0.5);
            padding: 40px;
            max-width: 450px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 40px 80px rgba(0,0,0,0.2);
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .modal.register-active { max-width: 520px; }
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            font-size: 1.5rem;
            color: var(--main);
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.3s;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close:hover {
            opacity: 1;
        }
        .terms-modal {
            max-width: 560px;
        }
        .terms-modal h3 {
            font-size: 1.1rem;
            margin-bottom: 16px;
            padding-right: 30px;
        }
        .terms-modal-body {
            max-height: 60vh;
            overflow-y: auto;
            font-size: 0.9rem;
            line-height: 1.7;
            color: var(--text-gray);
            white-space: pre-wrap;
        }

        .auth-tabs {
            display: flex; gap: 10px; margin-bottom: 30px;
            border-bottom: 2px solid rgba(0,0,0,0.05);
        }
        .auth-tab {
            flex: 1; padding: 15px; text-align: center;
            font-weight: 700; font-size: 0.9rem;
            cursor: pointer; opacity: 0.5; transition: all 0.3s;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
        }
        .auth-tab.active {
            opacity: 1; color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .auth-form {
            display: none;
        }
        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block; font-size: 0.85rem; font-weight: 700;
            margin-bottom: 8px; color: var(--main);
        }
        .form-group input {
            width: 100%; padding: 14px 18px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 12px; font-size: 0.95rem;
            font-family: 'Pretendard', sans-serif;
            background: rgba(255,255,255,0.6);
            transition: all 0.3s;
        }
        .form-group input:focus {
            outline: none; border-color: var(--accent);
            background: rgba(255,255,255,0.9);
        }
        .register-intro {
            background: rgba(45, 90, 76, 0.08);
            border: 1px solid rgba(45, 90, 76, 0.15);
            border-radius: 12px;
            padding: 14px 16px;
            margin-bottom: 24px;
            font-size: 0.8rem;
            line-height: 1.6;
            color: var(--main);
        }
        .register-intro ul {
            margin: 0;
            padding-left: 18px;
        }
        .register-intro li { margin-bottom: 4px; }
        .agreement-group {
            margin-bottom: 20px;
        }
        .agreement-group .agreement-title {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 12px;
        }
        .agreement-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 0.85rem;
            cursor: pointer;
        }
        .agreement-item span { flex: 1; }
        .terms-link {
            flex-shrink: 0;
            font-size: 0.8rem;
            color: var(--primary);
            font-weight: 600;
            text-decoration: underline;
        }
        .terms-link:hover { color: var(--primary-hover); }
        .agreement-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            flex-shrink: 0;
        }
        .agreement-item.required label { font-weight: 700; }
        .form-row {
            display: flex;
            gap: 10px;
            align-items: flex-end;
            margin-bottom: 20px;
        }
        .form-row .form-group { flex: 1; margin-bottom: 0; }
        .form-row .btn-secondary {
            padding: 14px 16px;
            border-radius: 12px;
            font-size: 0.85rem;
            white-space: nowrap;
        }
        .file-upload-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 20px;
        }
        .file-upload-row input[type="file"] {
            flex: 1;
            padding: 10px;
            font-size: 0.85rem;
        }
        .file-upload-row .file-name { font-size: 0.8rem; color: #666; margin-top: 4px; }
        .pharmacy-section-title {
            font-size: 0.95rem;
            font-weight: 800;
            color: var(--accent);
            margin: 28px 0 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(45, 90, 76, 0.2);
        }
        .pharmacy-section-title .required-note {
            font-size: 0.75rem;
            font-weight: 600;
            color: #888;
            margin-left: 8px;
        }
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
        }
        .radio-group label { display: inline-flex; align-items: center; gap: 6px; cursor: pointer; font-weight: 500; }
        .radio-group.tax-email-radio {
            align-items: center;
            gap: 16px;
            margin-top: 10px;
        }
        .radio-group.tax-email-radio .radio-question {
            font-weight: 600;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .radio-group.tax-email-radio .radio-options {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .btn-primary {
            width: 100%; padding: 16px;
            background: var(--accent); color: var(--white-on-accent);
            border: none; border-radius: 12px;
            font-size: 1rem; font-weight: 800;
            font-family: 'Pretendard', sans-serif;
            cursor: pointer; transition: all 0.3s;
            margin-top: 10px;
        }
        .btn-primary:hover {
            opacity: 0.9; transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(45, 90, 76, 0.3);
        }

        /* 소셜 로그인 버튼 */
        .social-login {
            margin-top: 25px;
            margin-bottom: 20px;
        }
        .social-divider {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 25px 0;
            color: rgba(0,0,0,0.3);
            font-size: 0.85rem;
        }
        .social-divider::before,
        .social-divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        .social-divider span {
            padding: 0 15px;
        }
        .social-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .btn-social {
            width: 100%;
            padding: 14px 18px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 700;
            font-family: 'Pretendard', sans-serif;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
        }
        .btn-social:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .btn-kakao {
            background: #FEE500;
            color: #000000;
            border-color: #FEE500;
        }
        .btn-kakao:hover {
            background: #FDD835;
            border-color: #FDD835;
        }
        .btn-google {
            background: #ffffff;
            color: #5F6368;
            border-color: rgba(0,0,0,0.15);
        }
        .btn-google:hover {
            background: #f8f9fa;
            border-color: rgba(0,0,0,0.2);
        }
        .social-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
        }

        /* 제품 목록 섹션 */
        .products-section {
            margin-top: 80px;
        }
        .products-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px; margin-top: 40px;
        }

        .product-card {
            background: var(--glass); backdrop-filter: blur(40px);
            border-radius: 24px; border: 1px solid rgba(255,255,255,0.5);
            padding: 30px; transition: all 0.4s;
            box-shadow: 0 20px 40px rgba(0,0,0,0.04);
            cursor: pointer;
        }
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 30px 60px rgba(0,0,0,0.08);
        }
        .product-card.clickable {
            cursor: pointer;
            position: relative;
        }
        .product-card.clickable::after {
            content: '클릭하여 상세보기';
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 700;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 10;
        }
        .product-card.clickable:hover::after {
            opacity: 1;
        }
        .product-card.clickable:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 35px 70px rgba(0,0,0,0.12);
        }

        .product-image {
            width: 100%; height: 200px;
            background: rgba(255,255,255,0.4);
            border-radius: 16px; margin-bottom: 20px;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.7rem; letter-spacing: 2px;
            color: var(--accent); font-weight: 600;
            border: 1px solid rgba(0,0,0,0.03);
        }

        .product-info h3 {
            font-size: 1.3rem; font-weight: 800;
            margin-bottom: 10px; letter-spacing: -0.02em;
        }
        .product-info p {
            font-size: 0.9rem; opacity: 0.6;
            line-height: 1.6; margin-bottom: 15px;
        }
        .product-price {
            font-size: 1.4rem; font-weight: 900;
            color: var(--accent); margin-bottom: 15px;
        }
        .product-actions {
            display: flex; gap: 10px;
        }
        .btn-secondary {
            flex: 1; padding: 12px;
            background: transparent; color: var(--accent);
            border: 2px solid var(--accent); border-radius: 10px;
            font-size: 0.85rem; font-weight: 700;
            font-family: 'Pretendard', sans-serif;
            cursor: pointer; transition: all 0.3s;
        }
        .btn-secondary:hover {
            background: var(--accent); color: white;
        }

        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .auth-section {
                padding: 30px 20px;
            }
            .pharmacy-header h2 {
                font-size: clamp(2rem, 8vw, 3rem);
            }
            .product-card {
                padding: 20px;
            }
            .product-card.clickable::after {
                top: 10px;
                right: 10px;
                font-size: 0.65rem;
                padding: 5px 10px;
            }
            .btn-social {
                padding: 12px 16px;
                font-size: 0.9rem;
            }
            .social-icon {
                width: 18px;
                height: 18px;
            }
        }

        @media (max-width: 480px) {
            nav { height: auto; min-height: 50px; padding: 8px 10px; }
            .logo img { height: 38px; }
            .nav-links { gap: 8px; }
            .nav-links a { font-size: 0.7rem; }
            .nav-links .pharmacy-link { padding: 5px 12px; font-size: 0.7rem; }
            .nav-auth, .nav-links .login-btn { font-size: 0.7rem; }
            .nav-links .user-info { flex-direction: column; gap: 5px; }
            .stack-card { padding: 30px 20px; }
            .pharmacy-section { padding: 100px 3% 60px; }
        }

        /* 주문 섹션 (로그인 후 표시) */
        .order-section {
            display: none;
            background: var(--glass); backdrop-filter: blur(40px);
            border-radius: 32px; border: 1px solid rgba(255,255,255,0.5);
            padding: 50px; margin-top: 60px;
            box-shadow: 0 40px 80px rgba(0,0,0,0.06);
        }
        .order-section.active {
            display: block;
        }

        .cart-items {
            margin-bottom: 30px;
        }
        .cart-item {
            display: flex; justify-content: space-between;
            align-items: center; padding: 20px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        .cart-item-info h4 {
            font-weight: 800; margin-bottom: 5px;
        }
        .cart-item-info p {
            font-size: 0.85rem; opacity: 0.6;
        }
        .cart-item-price {
            font-weight: 800; color: var(--accent);
            font-size: 1.2rem;
        }

        .order-summary {
            background: rgba(255,255,255,0.4);
            border-radius: 16px; padding: 30px;
            margin-top: 30px;
        }
        .summary-row {
            display: flex; justify-content: space-between;
            margin-bottom: 15px; font-size: 1rem;
        }
        .summary-row.total {
            font-size: 1.3rem; font-weight: 900;
            color: var(--accent); padding-top: 15px;
            border-top: 2px solid rgba(0,0,0,0.05);
        }

        /* 6. 제휴 약국 지도 섹션 */
        .pharmacy-map-section {
            padding: 120px 4% 80px;
            max-width: 1400px;
            margin: 0 auto;
            background: linear-gradient(to bottom, var(--bg) 0%, rgba(45, 90, 76, 0.02) 100%);
        }
        .pharmacy-map-header {
            text-align: center;
            margin-bottom: 50px;
        }
        .pharmacy-map-header span {
            display: inline-block;
            font-weight: 800;
            color: var(--accent);
            font-size: 0.8rem;
            letter-spacing: 0.3em;
            margin-bottom: 20px;
        }
        .pharmacy-map-header h2 {
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 900;
            letter-spacing: -0.03em;
            margin-bottom: 15px;
        }
        .pharmacy-map-header p {
            font-size: clamp(1rem, 1.5vw, 1.15rem);
            opacity: 0.6;
            max-width: 600px;
            margin: 0 auto;
        }
        .map-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 40px;
        }
        .map-wrapper {
            background: var(--glass);
            backdrop-filter: blur(40px);
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.5);
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.06);
            height: 600px;
        }
        #map {
            width: 100%;
            height: 100%;
        }
        .map-controls {
            background: var(--glass);
            backdrop-filter: blur(40px);
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.5);
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.06);
        }
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .search-input {
            flex: 1;
            padding: 14px 18px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 12px;
            font-size: 0.95rem;
            font-family: 'Pretendard', sans-serif;
            background: rgba(255,255,255,0.6);
            transition: all 0.3s;
        }
        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            background: rgba(255,255,255,0.9);
        }
        .search-btn {
            padding: 14px 24px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 700;
            font-family: 'Pretendard', sans-serif;
            cursor: pointer;
            transition: all 0.3s;
        }
        .search-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        .location-btn {
            width: 100%;
            padding: 14px;
            background: transparent;
            color: var(--accent);
            border: 2px solid var(--accent);
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 700;
            font-family: 'Pretendard', sans-serif;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        .location-btn:hover {
            background: var(--accent);
            color: white;
        }
        .pharmacy-list {
            max-height: 400px;
            overflow-y: auto;
        }
        .pharmacy-item {
            padding: 20px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            cursor: pointer;
            transition: all 0.3s;
        }
        .pharmacy-item:hover {
            background: rgba(255,255,255,0.4);
        }
        .pharmacy-item:last-child {
            border-bottom: none;
        }
        .pharmacy-item h4 {
            font-size: 1.1rem;
            font-weight: 800;
            margin-bottom: 8px;
            color: var(--accent);
        }
        .pharmacy-item p {
            font-size: 0.9rem;
            opacity: 0.6;
            margin-bottom: 5px;
        }
        .pharmacy-item .phone {
            font-weight: 700;
            color: var(--main);
        }
        .pharmacy-item .map-links {
            margin-top: 12px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .pharmacy-item .map-links a {
            font-size: 0.75rem;
            padding: 6px 12px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 700;
            transition: 0.2s;
        }
        .pharmacy-item .map-links a.link-kakao {
            background: #FEE500;
            color: #191919;
        }
        .pharmacy-item .map-links a.link-google {
            background: #e8e8e8;
            color: #333;
        }
        .pharmacy-item .map-links a:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        .map-fallback {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            flex-direction: column;
            padding: 40px;
            text-align: center;
            background: linear-gradient(180deg, rgba(45,90,76,0.06) 0%, rgba(255,255,255,0.5) 100%);
            border-radius: 20px;
        }
        .map-fallback .fallback-title {
            font-size: 1.2rem;
            font-weight: 800;
            margin-bottom: 12px;
            color: var(--accent);
        }
        .map-fallback .fallback-desc {
            font-size: 0.9rem;
            opacity: 0.7;
            line-height: 1.6;
            margin-bottom: 24px;
            max-width: 320px;
        }
        .map-fallback .fallback-hint {
            font-size: 0.85rem;
            opacity: 0.6;
            margin-top: 16px;
        }

        @media (max-width: 968px) {
            .map-container {
                grid-template-columns: 1fr;
            }
            .map-wrapper {
                height: 400px;
            }
        }

        /* 7. Footer */
        footer {
            height: 60vh;
            background: var(--accent);
            color: var(--white-on-accent);
            border-radius: 40px 40px 0 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 0 20px;
        }
        footer h2 { font-size: clamp(2.5rem, 8vw, 6rem); font-weight: 900; letter-spacing: -0.04em; margin-bottom: 20px; color: #fff; }
        footer p { opacity: 0.85; font-size: 0.8rem; letter-spacing: 1px; color: #fff; }

        /* 제품 상세 모달 */
        .product-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
            padding: 20px;
        }
        .product-detail-modal.active {
            display: flex;
        }
        .product-detail-content {
            background: var(--glass);
            backdrop-filter: blur(40px);
            border-radius: 32px;
            border: 1px solid rgba(255,255,255,0.5);
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 40px 80px rgba(0,0,0,0.2);
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        .product-detail-header {
            position: sticky;
            top: 0;
            background: var(--glass);
            backdrop-filter: blur(40px);
            padding: 30px 40px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }
        .product-detail-header h2 {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 900;
            letter-spacing: -0.03em;
            color: var(--accent);
        }
        .product-detail-close {
            background: transparent;
            border: none;
            font-size: 2rem;
            color: var(--main);
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .product-detail-close:hover {
            opacity: 1;
        }
        /* 리플릿(카탈로그) 모달 */
        .pamphlet-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            z-index: 2100;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
            padding: 24px;
        }
        .pamphlet-modal.active {
            display: flex;
        }
        .pamphlet-content {
            background: #fff;
            border-radius: 24px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 40px 80px rgba(0,0,0,0.25);
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        .pamphlet-header {
            position: sticky;
            top: 0;
            background: #fff;
            padding: 20px 24px;
            border-bottom: 1px solid rgba(0,0,0,0.06);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }
        .pamphlet-header h3 {
            font-size: 1.25rem;
            font-weight: 800;
            color: var(--accent);
        }
        .pamphlet-close {
            background: transparent;
            border: none;
            font-size: 1.75rem;
            color: var(--main);
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .pamphlet-close:hover {
            opacity: 1;
        }
        .pamphlet-body {
            padding: 24px;
            text-align: center;
        }
        .pamphlet-body img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            display: block;
            margin: 0 auto;
        }
        .product-detail-body {
            padding: 40px;
        }
        .product-detail-image {
            width: 100%;
            height: 400px;
            background: rgba(255,255,255,0.4);
            border-radius: 24px;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            letter-spacing: 3px;
            color: var(--accent);
            font-weight: 600;
            border: 1px solid rgba(0,0,0,0.03);
        }
        .product-detail-image .product-detail-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 24px;
        }
        .product-detail-info {
            margin-bottom: 30px;
        }
        .product-detail-info h3 {
            font-size: clamp(1.8rem, 3vw, 2.5rem);
            font-weight: 900;
            margin-bottom: 15px;
            letter-spacing: -0.02em;
        }
        .product-detail-price {
            font-size: 2rem;
            font-weight: 900;
            color: var(--accent);
            margin-bottom: 30px;
        }
        .product-detail-description {
            font-size: 1.1rem;
            line-height: 1.8;
            opacity: 0.8;
            margin-bottom: 30px;
        }
        .product-detail-specs {
            background: rgba(255,255,255,0.3);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }
        .product-detail-specs h4 {
            font-size: 1.3rem;
            font-weight: 800;
            margin-bottom: 20px;
            color: var(--accent);
        }
        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        .spec-item:last-child {
            border-bottom: none;
        }
        .spec-label {
            font-weight: 700;
            opacity: 0.7;
        }
        .spec-value {
            font-weight: 600;
        }
        .product-detail-actions {
            display: flex;
            gap: 15px;
            margin-top: 40px;
        }
        .product-detail-actions .btn-primary {
            flex: 1;
            margin-top: 0;
        }
        .product-detail-actions .btn-secondary {
            flex: 1;
            margin-top: 0;
        }

        @media (max-width: 768px) {
            .product-detail-content {
                max-width: 100%;
                margin: 10px;
            }
            .product-detail-header {
                padding: 20px;
            }
            .product-detail-body {
                padding: 30px 20px;
            }
            .product-detail-image {
                height: 250px;
            }
            .product-detail-actions {
                flex-direction: column;
            }
        }

        /* 인증 섹션 레이아웃 */
        .trust-section {
            padding: 150px 8%;
            background: transparent;
            position: relative;
        }

        .trust-header {
            text-align: center;
            margin-bottom: 80px;
        }

        .trust-header h2 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 800;
            letter-spacing: -0.04em;
            margin-bottom: 20px;
        }

        /* 인증 카드 그리드 */
        .trust-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .trust-card {
            background: var(--glass);
            backdrop-filter: blur(40px);
            border-radius: 32px;
            padding: 50px 40px;
            text-align: center;
            transition: all 0.5s cubic-bezier(0.2, 0, 0, 1);
            border: 1px solid rgba(255,255,255,0.5);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0;
            transform: translateY(30px);
        }

        .trust-card.reveal.show {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.6s cubic-bezier(0.2, 0, 0, 1);
        }

        /* 마우스 호버 시 스캔 효과 */
        .trust-card:hover {
            transform: translateY(-15px);
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 30px 60px rgba(45, 90, 76, 0.1);
            border-color: var(--accent);
        }

        .trust-card::after {
            content: '';
            position: absolute;
            top: -100%;
            left: -100%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(45, 90, 76, 0.05), transparent);
            transition: 0.5s;
            pointer-events: none;
        }

        .trust-card:hover::after {
            top: 100%;
            left: 100%;
        }

        /* 인증 아이콘 공간 (심플한 원형 디자인) */
        .cert-icon {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.03);
            font-size: 1.5rem;
            color: var(--accent);
            font-weight: 900;
        }

        .trust-card h3 {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--main);
        }

        .trust-card p {
            font-size: 1rem;
            color: var(--text-main);
            opacity: 0.7;
            line-height: 1.6;
        }

        .reg-num {
            margin-top: 25px;
            padding: 8px 18px;
            background: rgba(45, 90, 76, 0.08);
            border-radius: 100px;
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent);
            letter-spacing: 1px;
        }

        /* 모바일 대응 */
        @media (max-width: 900px) {
            .trust-section {
                padding: 100px 4%;
            }
            .trust-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .trust-card {
                padding: 40px 30px;
            }
        }

        /* 첫 페이지: 제품소개 (디알에스 스타일) */
        .product-intro-section {
            padding: 80px 8% 100px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .product-intro-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding: 0 4px;
        }
        .product-intro-header h2 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            color: var(--main);
        }
        .product-intro-header .more-link {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--accent);
            text-decoration: none;
            transition: opacity 0.3s;
        }
        .product-intro-header .more-link:hover { opacity: 0.8; }
        .product-intro-grid {
            display: flex;
            gap: 28px;
            overflow-x: auto;
            padding: 10px 0 20px;
            scroll-snap-type: x mandatory;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .product-intro-grid::-webkit-scrollbar { display: none; }
        .product-intro-card {
            flex: 0 0 280px;
            scroll-snap-align: start;
            background: #fff;
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.06);
            box-shadow: 0 8px 32px rgba(0,0,0,0.06);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .product-intro-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 48px rgba(45, 90, 76, 0.12);
        }
        .product-intro-card .card-img {
            width: 100%;
            aspect-ratio: 1;
            object-fit: contain;
            background: linear-gradient(180deg, rgba(45,90,76,0.04) 0%, #fafafa 100%);
            padding: 24px;
        }
        .product-intro-card .card-name {
            padding: 20px 24px;
            font-size: 1.15rem;
            font-weight: 800;
            color: var(--main);
        }

        /* 첫 페이지: 공식 블로그 (디알에스 스타일, placeholder) */
        .blog-section {
            padding: 60px 8% 120px;
            max-width: 1400px;
            margin: 0 auto;
            background: linear-gradient(180deg, transparent 0%, rgba(45,90,76,0.02) 100%);
        }
        .blog-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding: 0 4px;
        }
        .blog-header h2 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            color: var(--main);
        }
        .blog-header .blog-link {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--accent);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: opacity 0.3s;
        }
        .blog-header .blog-link:hover { opacity: 0.8; }
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 24px;
        }
        .blog-card {
            background: #fff;
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.06);
            box-shadow: 0 6px 24px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .blog-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 40px rgba(0,0,0,0.08);
        }
        .blog-card .blog-thumb {
            width: 100%;
            aspect-ratio: 16/10;
            object-fit: cover;
            background: #eee;
        }
        .blog-card .blog-tag {
            display: inline-block;
            margin: 16px 20px 0;
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--accent);
            letter-spacing: 1px;
        }
        .blog-card .blog-title {
            padding: 8px 20px 20px;
            font-size: 1rem;
            font-weight: 700;
            line-height: 1.4;
            color: var(--main);
        }

        /* 소식 섹션 전용 스타일 */
        .news-section {
            padding: 150px 0;
            background: transparent;
            position: relative;
        }

        .news-header {
            padding: 0 8%;
            margin-bottom: 60px;
        }

        .news-header h2 {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 800;
            letter-spacing: -0.04em;
        }

        /* 가로 스크롤 / 벤토 카드 컨테이너 */
        .news-container {
            display: flex;
            overflow-x: auto;
            padding: 20px 8% 60px;
            gap: 30px;
            scroll-snap-type: x mandatory;
            -ms-overflow-style: none; /* IE/Edge */
            scrollbar-width: none; /* Firefox */
        }

        .news-container::-webkit-scrollbar { display: none; } /* Chrome/Safari */

        .news-card {
            flex: 0 0 400px;
            height: 500px;
            background: var(--glass);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255,255,255,0.4);
            border-radius: 40px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            scroll-snap-align: start;
            transition: all 0.6s cubic-bezier(0.2, 0, 0, 1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .news-card:hover {
            transform: translateY(-20px) scale(1.02);
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 40px 80px rgba(45, 90, 76, 0.1);
        }

        .news-tag {
            font-size: 0.75rem;
            font-weight: 800;
            color: var(--accent);
            letter-spacing: 2px;
            margin-bottom: 15px;
            display: block;
        }

        .news-card h3 {
            font-size: 1.8rem;
            font-weight: 700;
            line-height: 1.3;
            word-break: keep-all;
        }

        .news-card .date {
            font-size: 0.9rem;
            opacity: 0.4;
            font-weight: 500;
        }

        /* 장식적 요소: 배경 숫자 */
        .bg-num {
            position: absolute;
            bottom: -20px;
            right: 20px;
            font-size: 8rem;
            font-weight: 900;
            color: var(--accent);
            opacity: 0.03;
            pointer-events: none;
        }

        /* 모바일 대응 */
        @media (max-width: 850px) {
            .product-intro-section { padding: 50px 4% 60px; }
            .product-intro-card { flex: 0 0 240px; }
            .blog-section { padding: 40px 4% 80px; }
            .blog-grid { grid-template-columns: 1fr; }
            .news-section {
                padding: 100px 0;
            }
            .news-header {
                padding: 0 4%;
                margin-bottom: 40px;
            }
            .news-container {
                padding: 20px 4% 40px;
                gap: 20px;
            }
            .news-card {
                flex: 0 0 300px;
                height: 400px;
                padding: 30px;
            }
            .news-card h3 {
                font-size: 1.4rem;
            }
            .bg-num {
                font-size: 6rem;
                bottom: -10px;
                right: 15px;
            }
        }

        @media (max-width: 480px) {
            .news-card {
                flex: 0 0 280px;
                height: 380px;
                padding: 25px;
            }
            .news-card h3 {
                font-size: 1.2rem;
            }
        }

        /* R&D 프로세스 모달 스타일 */
        #rnd-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            transition: 0.5s;
        }

        #rnd-modal.active {
            display: flex;
            opacity: 1;
        }

        #rnd-modal .modal-window {
            width: 90%;
            max-width: 1000px;
            height: 600px;
            background: var(--glass);
            backdrop-filter: blur(40px);
            border-radius: 40px;
            border: 1px solid rgba(255,255,255,0.5);
            box-shadow: 0 50px 100px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            transform: scale(0.9);
            transition: 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        #rnd-modal.active .modal-window {
            transform: scale(1);
        }

        #rnd-modal .modal-close {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255,255,255,0.6);
            border: 1px solid rgba(0,0,0,0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 10;
            color: var(--main);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        #rnd-modal .modal-close:hover {
            background: rgba(255,255,255,0.9);
            transform: rotate(90deg);
        }

        #rnd-modal .modal-content {
            display: flex;
            height: 100%;
        }

        #rnd-modal .modal-visual {
            flex: 1;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 1.2rem;
            position: relative;
        }

        #rnd-modal #modal-step-tag {
            position: absolute;
            top: 30px;
            left: 30px;
            font-size: 0.9rem;
            letter-spacing: 3px;
            opacity: 0.9;
        }

        #rnd-modal .modal-text {
            flex: 1.2;
            padding: 60px;
            overflow-y: auto;
        }

        #rnd-modal .modal-divider {
            width: 40px;
            height: 4px;
            background: var(--accent);
            margin: 20px 0 30px;
            border-radius: 2px;
        }

        #rnd-modal .modal-text h2 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            letter-spacing: -0.03em;
        }

        #rnd-modal .modal-text p {
            font-size: 1.1rem;
            line-height: 1.8;
            opacity: 0.8;
        }

        #rnd-modal .detail-list {
            list-style: none;
            margin-top: 30px;
            padding: 0;
        }

        #rnd-modal .detail-list li {
            padding: 15px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            line-height: 1.6;
        }

        #rnd-modal .detail-list li::before {
            content: '•';
            color: var(--accent);
            margin-right: 15px;
            font-weight: 900;
            font-size: 1.2rem;
        }

        #rnd-modal .detail-list li:last-child {
            border-bottom: none;
        }

        /* 모바일 팝업 대응 */
        @media (max-width: 850px) {
            #rnd-modal .modal-content {
                flex-direction: column;
            }
            #rnd-modal .modal-visual {
                height: 200px;
                flex: none;
            }
            #rnd-modal .modal-window {
                height: 90vh;
                overflow-y: auto;
            }
            #rnd-modal .modal-text {
                padding: 40px 30px;
            }
            #rnd-modal .modal-text h2 {
                font-size: 2rem;
            }
        }

        /* R&D 프로세스 모달 스타일 */
        #rnd-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            transition: 0.5s;
        }

        #rnd-modal.active {
            display: flex;
            opacity: 1;
        }

        #rnd-modal .modal-window {
            width: 90%;
            max-width: 1000px;
            height: 600px;
            background: var(--glass);
            backdrop-filter: blur(40px);
            border-radius: 40px;
            border: 1px solid rgba(255,255,255,0.5);
            box-shadow: 0 50px 100px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            transform: scale(0.9);
            transition: 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        #rnd-modal.active .modal-window {
            transform: scale(1);
        }

        #rnd-modal .modal-close {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255,255,255,0.6);
            border: 1px solid rgba(0,0,0,0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 10;
            color: var(--main);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-family: 'Pretendard', sans-serif;
        }

        #rnd-modal .modal-close:hover {
            background: rgba(255,255,255,0.9);
            transform: rotate(90deg);
        }

        #rnd-modal .modal-content {
            display: flex;
            height: 100%;
        }

        #rnd-modal .modal-visual {
            flex: 1;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 1.2rem;
            position: relative;
        }

        #rnd-modal #modal-step-tag {
            position: absolute;
            top: 30px;
            left: 30px;
            font-size: 0.9rem;
            letter-spacing: 3px;
            opacity: 0.9;
            font-weight: 700;
        }

        #rnd-modal .step-buttons {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }

        #rnd-modal .step-buttons button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.5);
            background: transparent;
            color: white;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Pretendard', sans-serif;
            font-size: 0.9rem;
        }

        #rnd-modal .step-buttons button:hover {
            background: rgba(255,255,255,0.3);
            border-color: white;
        }

        #rnd-modal .step-buttons button.active {
            background: white;
            color: var(--accent);
            border-color: white;
        }

        #rnd-modal .modal-text {
            flex: 1.2;
            padding: 60px;
            overflow-y: auto;
        }

        #rnd-modal .modal-divider {
            width: 40px;
            height: 4px;
            background: var(--accent);
            margin: 20px 0 30px;
            border-radius: 2px;
        }

        #rnd-modal .modal-text h2 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            letter-spacing: -0.03em;
            color: var(--main);
        }

        #rnd-modal .modal-text p {
            font-size: 1.1rem;
            line-height: 1.8;
            opacity: 0.8;
            color: var(--text-main);
        }

        #rnd-modal .detail-list {
            list-style: none;
            margin-top: 30px;
            padding: 0;
        }

        #rnd-modal .detail-list li {
            padding: 15px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            line-height: 1.6;
            color: var(--text-main);
        }

        #rnd-modal .detail-list li::before {
            content: '•';
            color: var(--accent);
            margin-right: 15px;
            font-weight: 900;
            font-size: 1.2rem;
        }

        #rnd-modal .detail-list li:last-child {
            border-bottom: none;
        }

        /* 모바일 팝업 대응 */
        @media (max-width: 850px) {
            #rnd-modal .modal-content {
                flex-direction: column;
            }
            #rnd-modal .modal-visual {
                height: 200px;
                flex: none;
            }
            #rnd-modal .modal-window {
                height: 90vh;
                overflow-y: auto;
            }
            #rnd-modal .modal-text {
                padding: 40px 30px;
            }
            #rnd-modal .modal-text h2 {
                font-size: 2rem;
            }
            #rnd-modal .step-buttons {
                bottom: 15px;
            }
            #rnd-modal .step-buttons button {
                width: 35px;
                height: 35px;
                font-size: 0.8rem;
            }
        }

        /* 유틸리티 클래스 */
        .hidden { display: none !important; }
        .text-center { text-align: center; }

    </style>
</head>
<body>

    <header>
        <div class="nav-inner">
            <a href="#" class="logo" onclick="scrollToTop(); return false;"><img src="assets/meidin-logo.png" alt="메이딘"></a>
            <div class="nav-menu">
                <div class="nav-item">
                    <button type="button" class="nav-trigger">회사소개</button>
                    <div class="nav-dropdown">
                        <a href="#about">메이딘 소개</a>
                        <a href="#about">연혁</a>
                        <a href="#certifications">협력사</a>
                    </div>
                </div>
                <a href="#product">제품소개</a>
                <a href="#about">제품소개 영상</a>
                <a href="#blog">공식블로그</a>
                <div class="nav-item">
                    <button type="button" class="nav-trigger">상담문의</button>
                    <div class="nav-dropdown">
                        <a href="javascript:void(0)" onclick="openKakaoChat()">메이딘 카톡 문의</a>
                    </div>
                </div>
            </div>
            <div class="nav-utils">
                <div class="nav-auth" id="navAuth">
                    <button type="button" id="loginNavBtn" onclick="openLoginModal()">로그인</button>
                    <span class="auth-divider">|</span>
                    <button type="button" onclick="openRegisterModal()">회원가입</button>
                </div>
                <a href="#pharmacy" class="pharmacy-link highlight" id="pharmacyNavLink" onclick="handlePharmacyNav(event)">약사전용몰</a>
                <div class="user-info hidden" id="userInfo">
                    <span class="user-name" id="userName"></span>
                    <button class="logout-btn" onclick="handleLogout()">로그아웃</button>
                </div>
            </div>
        </div>
    </header>

    <!-- 로그인 모달 -->
    <div class="modal-overlay" id="loginModal" onclick="closeModalOnOverlay(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeLoginModal()">&times;</button>
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="switchTab('login')">로그인</div>
                <div class="auth-tab" onclick="switchTab('register')">회원가입</div>
            </div>

            <form class="auth-form active" id="loginForm" onsubmit="handleLogin(event)">
                <!-- 소셜 로그인 -->
                <div class="social-login">
                    <div class="social-buttons">
                        <button type="button" class="btn-social btn-kakao" onclick="handleKakaoLogin()">
                            <span class="social-icon">K</span>
                            <span>카카오로 로그인</span>
                        </button>
                        <button type="button" class="btn-social btn-google" onclick="handleGoogleLogin()">
                            <span class="social-icon">G</span>
                            <span>구글로 로그인</span>
                        </button>
                    </div>
                    <div class="social-divider">
                        <span>또는</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>약사 면허번호</label>
                    <input type="text" id="loginLicense" placeholder="면허번호를 입력하세요" required>
                </div>
                <div class="form-group">
                    <label>비밀번호</label>
                    <input type="password" id="loginPassword" placeholder="비밀번호를 입력하세요" required>
                </div>
                <button type="submit" class="btn-primary">로그인</button>
            </form>

            <form class="auth-form" id="registerForm" onsubmit="handleRegister(event)">
                <div class="register-intro">
                    <ul>
                        <li>교육자료 및 쇼핑몰 이용은 <strong>개국 약사님</strong>만 가능합니다.</li>
                        <li>약사면허증, 사업자등록증 사본을 직접 업로드 해주세요.</li>
                    </ul>
                </div>

                <div class="agreement-group">
                    <div class="agreement-title">약관 동의</div>
                    <label class="agreement-item">
                        <input type="checkbox" id="agreeTerms" name="agreeTerms">
                        <span>회원가입약관에 동의합니다.</span>
                        <a href="javascript:void(0)" class="terms-link" onclick="event.preventDefault();event.stopPropagation();openTermsModal('membership')">보기</a>
                    </label>
                    <label class="agreement-item">
                        <input type="checkbox" id="agreePrivacy" name="agreePrivacy">
                        <span>개인정보 수집·이용에 동의합니다. (제3자·위탁업체 포함)</span>
                        <a href="javascript:void(0)" class="terms-link" onclick="event.preventDefault();event.stopPropagation();openTermsModal('privacy')">보기</a>
                    </label>
                    <label class="agreement-item required">
                        <input type="checkbox" id="agreeAge" name="agreeAge" required>
                        <span>만 14세 이상입니다. (필수)</span>
                    </label>
                    <label class="agreement-item required">
                        <input type="checkbox" id="agreeTrade" name="agreeTrade" required>
                        <span>메이딘 거래 규정에 동의합니다. (필수)</span>
                        <a href="javascript:void(0)" class="terms-link" onclick="event.preventDefault();event.stopPropagation();openTermsModal('trade')">보기</a>
                    </label>
                </div>

                <div class="form-group">
                    <label>세금계산서 받을 이메일 *</label>
                    <input type="email" id="registerTaxEmail" placeholder="세금계산서 수령 이메일을 입력하세요" required>
                    <div class="radio-group tax-email-radio">
                        <span class="radio-question">이메일로 받으시겠습니까?</span>
                        <div class="radio-options">
                            <label><input type="radio" name="emailOptIn" value="yes" checked> 예</label>
                            <label><input type="radio" name="emailOptIn" value="no"> 아니오</label>
                        </div>
                    </div>
                </div>

                <div class="pharmacy-section-title">약국정보 <span class="required-note">*는 필수 입력 사항입니다.</span></div>

                <div class="form-row">
                    <div class="form-group">
                        <label>사업자번호 *</label>
                        <input type="text" id="registerBizNo" placeholder="숫자만 입력 (국세청 등록 정보 기준)" required>
                    </div>
                    <button type="button" class="btn-secondary" onclick="checkBizNoDuplicate()">중복확인</button>
                </div>
                <div class="file-upload-row form-group">
                    <div style="flex:1;">
                        <label>사업자등록증 사본 *</label>
                        <input type="file" id="registerBizCert" accept=".pdf,.jpg,.jpeg,.png" required onchange="document.getElementById('bizCertFileName').textContent = this.files[0] ? this.files[0].name : ''">
                        <div class="file-name" id="bizCertFileName"></div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>약사 면허번호 *</label>
                        <input type="text" id="registerLicense" placeholder="숫자만 입력하세요" required>
                    </div>
                    <button type="button" class="btn-secondary" onclick="checkLicenseDuplicate()">중복확인</button>
                </div>
                <div class="file-upload-row form-group">
                    <div style="flex:1;">
                        <label>약사면허증 사본 *</label>
                        <input type="file" id="registerLicenseCert" accept=".pdf,.jpg,.jpeg,.png" required onchange="document.getElementById('licenseCertFileName').textContent = this.files[0] ? this.files[0].name : ''">
                        <div class="file-name" id="licenseCertFileName"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>약국 요양기관기호 *</label>
                    <input type="text" id="registerPharmacyCode" placeholder="요양기관기호를 입력하세요" required>
                </div>
                <div class="form-group">
                    <label>약국명 *</label>
                    <input type="text" id="registerPharmacyName" placeholder="약국명을 입력하세요" required>
                </div>
                <div class="form-group">
                    <label>약학대학 *</label>
                    <input type="text" id="registerPharmacyUniv" placeholder="졸업 약학대학을 입력하세요" required>
                </div>
                <div class="form-group">
                    <label>가입경로 *</label>
                    <input type="text" id="registerJoinPath" placeholder="예: 검색, 지인 소개 등" required>
                </div>

                <div class="form-group">
                    <label>이름 *</label>
                    <input type="text" id="registerName" placeholder="이름을 입력하세요" required>
                </div>
                <div class="form-group">
                    <label>이메일 (로그인/연락용) *</label>
                    <input type="email" id="registerEmail" placeholder="이메일을 입력하세요" required>
                </div>
                <div class="form-group">
                    <label>비밀번호 *</label>
                    <input type="password" id="registerPassword" placeholder="비밀번호를 입력하세요" required>
                </div>
                <div class="form-group">
                    <label>전화번호 *</label>
                    <input type="tel" id="registerPhone" placeholder="전화번호를 입력하세요" required>
                </div>

                <button type="submit" class="btn-primary">회원가입</button>
            </form>
        </div>
    </div>

    <main>
        <section class="hero-section">
            <div class="hero-banner" id="heroBanner">
                <div class="hero-slides">
                    <div class="hero-slide active" data-slide="0" style="background-image: url('assets/nature-research-section.png');">
                        <div class="hero-content">
                            <span>PREMIUM NATURAL SUPPLEMENT</span>
                            <h2>자연의 힘으로 일상의<br>건강을 설계합니다</h2>
                            <a href="#about" class="btn-pill">브랜드 스토리 ➔</a>
                        </div>
                    </div>
                    <div class="hero-slide" data-slide="1" style="background-image: url('https://images.unsplash.com/photo-1547517023-7ca0c162f816?auto=format&fit=crop&w=1400&q=80');">
                        <div class="hero-content">
                            <span>PURE INGREDIENTS, SCIENTIFIC PROCESS</span>
                            <h2>순수한 원료와<br>과학적 공정의 만남</h2>
                            <a href="#product" class="btn-pill">제품 알아보기 ➔</a>
                        </div>
                    </div>
                    <div class="hero-slide" data-slide="2" style="background-image: url('https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?auto=format&fit=crop&w=1400&q=80');">
                        <div class="hero-content">
                            <span>MEIDIN SIGNATURE</span>
                            <h2>센시비와 함께하는<br>균형 있는 일상</h2>
                            <a href="#product" class="btn-pill">센시비 보기 ➔</a>
                        </div>
                    </div>
                    <div class="hero-slide" data-slide="3" style="background-image: url('https://images.unsplash.com/photo-1587854692152-cbe660dbde88?auto=format&fit=crop&w=1400&q=80');">
                        <div class="hero-content">
                            <span>PARTNER PHARMACIES</span>
                            <h2>전국 제휴 약국에서<br>만나보세요</h2>
                            <a href="#pharmacyMap" class="btn-pill">약국 찾기 ➔</a>
                        </div>
                    </div>
                </div>
                <div class="slider-dots" id="heroDots">
                    <button type="button" class="dot active" data-index="0" aria-label="1번 슬라이드"></button>
                    <button type="button" class="dot" data-index="1" aria-label="2번 슬라이드"></button>
                    <button type="button" class="dot" data-index="2" aria-label="3번 슬라이드"></button>
                    <button type="button" class="dot" data-index="3" aria-label="4번 슬라이드"></button>
                </div>
            </div>
        </section>

        <section class="container about-section" id="about">
            <div class="about-text">
                <span class="sub-title">전국 제휴 약국과 함께하는</span>
                <h2>프리미엄 건강기능식품<br>연구기업, 메이딘</h2>
                <p>메이딘은 약사와 함께 고객의 건강한 미래를 추구합니다.<br>전문가의 생생한 현장 경험을 제품 개발에 연결하여 정확하고 올바른 솔루션을 제공합니다.</p>
                <a href="javascript:void(0)" class="btn-pill" onclick="openRndModal('01')">회사소개 더 보기 ➔</a>
            </div>
            <div class="about-image">
                <img src="assets/nature-research-section.png" alt="메이딘 연구">
            </div>
        </section>

        <section class="bg-gray-section" id="product">
            <div class="container">
                <div class="section-header">
                    <h2>제품소개</h2>
                    <a href="#about" class="btn-pill">브랜드 스토리 ➔</a>
                </div>
                <div class="signature-product">
                    <div class="sig-visual">
                        <div class="badge-wrap">
                            <span class="badge">BEST SELLER</span>
                            <span class="badge outline">면역 체계 개선</span>
                        </div>
                        <img src="assets/sensibee-rendering.png" alt="센시비 제품 이미지">
                    </div>
                    <div class="sig-info">
                        <span class="sub-label">MAYDIN THE FIRST MASTERPIECE</span>
                        <h3>센시비 (SENSIBI)</h3>
                        <p class="desc">과항진된 면역체계 개선을 위해 설계된 메이딘의 첫 번째 해답.<br>참당귀 추출물과 핵심 비타민 미네랄의 정밀한 배합으로 당신의 신체 밸런스를 다시 세웁니다.</p>
                        <div class="sig-specs">
                            <div class="spec-item">
                                <strong>비타민 D</strong>
                                <span>면역 조절 및 뼈 건강</span>
                            </div>
                            <div class="spec-item">
                                <strong>아연</strong>
                                <span>정상적인 면역 기능</span>
                            </div>
                            <div class="spec-item">
                                <strong>셀렌</strong>
                                <span>항산화 및 면역 지원</span>
                            </div>
                        </div>
                        <div class="sig-sub-specs">
                            <span class="sub-label">부원료</span>
                            <div class="sub-items">
                                <span>참당귀 추출물</span>
                                <span>강황 추출물</span>
                            </div>
                        </div>
                        <div class="sig-actions">
                            <a href="javascript:void(0)" class="sig-btn-primary" onclick="openProductDetail(1)">제품 상세 보기</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="container" id="blog">
            <div class="section-header">
                <h2>공식 블로그</h2>
                <a href="#certifications" class="btn-pill">블로그 이동 ➔</a>
            </div>
            <div class="blog-grid">
                <a href="javascript:void(0)" class="blog-card" onclick="openNewsDetail(1)">
                    <div class="blog-img"><img src="assets/nature-research-section.png" alt="블로그 썸네일"></div>
                    <div class="blog-text">
                        <span class="tag">보도자료</span>
                        <h3>메이딘, 품질경영시스템 ISO 9001 인증 획득</h3>
                        <span class="date">2026.11.28</span>
                    </div>
                </a>
                <a href="javascript:void(0)" class="blog-card" onclick="openNewsDetail(2)">
                    <div class="blog-img"><img src="assets/nature-research-section.png" alt="블로그 썸네일"></div>
                    <div class="blog-text">
                        <span class="tag">분야정보</span>
                        <h3>도대체 참당귀 추출물이 뭣인지? 면역력 독립선언 편</h3>
                        <span class="date">2026.10.15</span>
                    </div>
                </a>
                <a href="javascript:void(0)" class="blog-card" onclick="openNewsDetail(3)">
                    <div class="blog-img"><img src="assets/nature-research-section.png" alt="블로그 썸네일"></div>
                    <div class="blog-text">
                        <span class="tag">공지사항</span>
                        <h3>메이딘 공식 홈페이지 및 온라인 스토어 오픈 안내</h3>
                        <span class="date">2026.09.05</span>
                    </div>
                </a>
                <a href="javascript:void(0)" class="blog-card" onclick="openNewsDetail(4)">
                    <div class="blog-img"><img src="assets/nature-research-section.png" alt="블로그 썸네일"></div>
                    <div class="blog-text">
                        <span class="tag">제품소개</span>
                        <h3>센시비 론칭 1주년 기념 고객 감사 이벤트 진행</h3>
                        <span class="date">2026.10.10</span>
                    </div>
                </a>
            </div>
        </section>
    </main>

    <!-- 인증 및 등록 섹션 -->
    <section class="trust-section" id="certifications">
        <div class="trust-header">
            <p style="font-weight: 800; color: var(--accent); letter-spacing: 5px; margin-bottom: 15px; font-size: 0.8rem;">CERTIFIED QUALITY</p>
            <h2>엄격한 기준이 만드는<br>정직한 신뢰.</h2>
        </div>

        <div class="trust-grid">
            <div class="trust-card reveal">
                <div class="cert-icon">✓</div>
                <h3>정식 등록 사업자</h3>
                <p>메이딘은 관련 법규를 준수하며<br>투명한 경영 원칙을 지킵니다.</p>
                <div class="reg-num">463-05-03407</div>
            </div>

            <div class="trust-card reveal">
                <div class="cert-icon">®</div>
                <h3>센시비 상표권 보유</h3>
                <p>독자적인 브랜드 가치를 위해<br>SENSIBEE 상표를 공식 등록하였습니다.</p>
                <div class="reg-num">제 40-2404407 호</div>
            </div>

            <div class="trust-card reveal">
                <div class="cert-icon">🛡️</div>
                <h3>건강기능식품 영업신고</h3>
                <p>적법한 판매 절차를 거쳐 안전한<br>건강기능식품만을 유통합니다.</p>
                <div class="reg-num">제 2025-0350699 호</div>
            </div>
        </div>
    </section>

    <!-- 약사전용몰 섹션 (로그인 후에만 표시) -->
    <section class="pharmacy-section" id="pharmacy">
        <div class="pharmacy-header">
            <span>PHARMACY PORTAL</span>
            <h2>약사전용몰</h2>
            <p>인증된 약사만을 위한 특별한 공간입니다. 메이딘의 프리미엄 제품을 전문가 가격으로 만나보세요.</p>
        </div>

        <!-- 제품 목록 섹션 -->
        <div class="products-section" id="productsSection">
            <div class="pharmacy-header">
                <h2>제품 목록</h2>
                <p>메이딘의 프리미엄 영양제를 만나보세요</p>
            </div>

            <div class="products-grid" id="productsGrid">
                <!-- 제품 카드들이 동적으로 추가됩니다 -->
            </div>
        </div>

        <!-- 주문 섹션 (로그인 후 표시) -->
        <div class="order-section hidden" id="orderSection">
            <div class="pharmacy-header">
                <h2>주문 내역</h2>
            </div>

            <div class="cart-items" id="cartItems">
                <!-- 장바구니 아이템들이 동적으로 추가됩니다 -->
            </div>

            <div class="order-summary">
                <div class="summary-row">
                    <span>상품 합계</span>
                    <span id="subtotal">0원</span>
                </div>
                <div class="summary-row">
                    <span>배송비</span>
                    <span>무료</span>
                </div>
                <div class="summary-row total">
                    <span>총 결제금액</span>
                    <span id="total">0원</span>
                </div>
            </div>

            <button class="btn-primary" onclick="handleOrder()" style="margin-top: 30px;">주문하기</button>
        </div>
    </section>

    <!-- R&D 프로세스 모달 -->
    <div id="rnd-modal" class="modal-overlay" onclick="closeRndModalOnOverlay(event)">
        <div class="modal-window" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeRndModal()">&times;</button>
            <div class="modal-content">
                <div class="modal-visual" id="modal-img">
                    <span id="modal-step-tag">STEP 01</span>
                    <div class="step-buttons"></div>
                </div>
                <div class="modal-text">
                    <h2 id="modal-title">원료 선정</h2>
                    <div class="modal-divider"></div>
                    <p id="modal-desc">상세 설명이 여기에 들어갑니다.</p>
                    <ul class="detail-list" id="modal-list">
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 제품 상세 모달 -->
    <div class="product-detail-modal" id="productDetailModal" onclick="closeProductDetailOnOverlay(event)">
        <div class="product-detail-content" onclick="event.stopPropagation()">
            <div class="product-detail-header">
                <h2 id="detailProductName">센시비 (SENSIBI)</h2>
                <button class="product-detail-close" onclick="closeProductDetail()">&times;</button>
            </div>
            <div class="product-detail-body" id="productDetailBody">
                <!-- 제품 상세 내용이 동적으로 추가됩니다 -->
            </div>
        </div>
    </div>

    <!-- 리플릿(센시비 카탈로그) 모달 -->
    <div class="pamphlet-modal" id="pamphletModal" onclick="closePamphletOnOverlay(event)">
        <div class="pamphlet-content" onclick="event.stopPropagation()">
            <div class="pamphlet-header">
                <h3>08. 센시비 카탈로그</h3>
                <button type="button" class="pamphlet-close" onclick="closePamphletModal()" aria-label="닫기">&times;</button>
            </div>
            <div class="pamphlet-body">
                <img id="pamphletImg" src="assets/sensibee-catalog.png" alt="센시비 카탈로그 리플릿" onerror="this.style.display='none'; document.getElementById('pamphletPlaceholder').style.display='block';">
                <p id="pamphletPlaceholder" style="display:none; padding: 60px 20px; color: #999; font-size: 0.95rem;">카탈로그 이미지 파일(<code>assets/sensibee-catalog.png</code>)을 추가하면 여기에 표시됩니다.</p>
            </div>
        </div>
    </div>

    <!-- 약관 보기 모달 -->
    <div class="modal-overlay" id="termsModal" onclick="closeTermsModalOnOverlay(event)">
        <div class="modal terms-modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeTermsModal()">&times;</button>
            <h3 id="termsModalTitle">약관</h3>
            <div class="terms-modal-body" id="termsModalBody">
                <!-- 약관 내용이 동적으로 표시됩니다 -->
            </div>
        </div>
    </div>

    <!-- 제휴 약국 지도 섹션 -->
    <section class="pharmacy-map-section" id="pharmacyMap">
        <div class="pharmacy-map-header">
            <span>PARTNER PHARMACIES</span>
            <h2>제휴 약국 찾기</h2>
            <p>MAYDIN 제품을 구매할 수 있는 제휴 약국을 지도에서 찾아보세요.</p>
        </div>

        <div class="map-container">
            <div class="map-wrapper">
                <div id="map"></div>
            </div>

            <div class="map-controls">
                <div class="search-box">
                    <input type="text" id="searchInput" class="search-input" placeholder="약국명 또는 지역명 검색">
                    <button class="search-btn" onclick="searchPharmacy()">검색</button>
                </div>
                <button class="location-btn" onclick="getCurrentLocation()">📍 내 위치로 찾기</button>
                
                <div class="pharmacy-list" id="pharmacyList">
                    <!-- 약국 목록이 동적으로 추가됩니다 -->
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-inner">
            <div>
                <div class="footer-logo">MAYDIN</div>
                <div class="footer-info">
                    <p><strong>대표:</strong> 신형상 | <strong>사업자등록번호:</strong> 463-05-03407</p>
                    <p><strong>주소:</strong> 울산광역시 남구 도산로107번길 9, 2층(달동)</p>
                    <p><strong>고객센터:</strong> 010-8222-8164 | contact@meidin.kr</p>
                    <p class="footer-copyright">Copyright © 2026 MAYDIN. All rights reserved.</p>
                </div>
            </div>
            <button class="btn-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">TOP ↑</button>
        </div>
    </footer>

    <script>
        // 전역 상태 관리
        let currentUser = null;
        let cart = [];
        let products = [
            {
                id: 1,
                name: '센시비 (SENSIBI)',
                description: '민감한 현대인을 위한 자연 유래 성분 영양제',
                price: 89000,
                image: 'PRODUCT 1',
                fullDescription: '센시비는 메이딘의 첫 번째 시그니처 제품으로, 민감한 현대인을 위해 특별히 설계되었습니다.<br>자연에서 추출한 순수한 성분만을 사용하여 신체의 자연스러운 밸런스를 회복하고 유지하는 데 도움을 줍니다.',
                specs: {
                    '주요 성분': '비타민D, 아연, 셀렌, 강황추출물, 참당귀추출물',
                    '용량': '60정 (1개월 분)',
                    '섭취 방법': '1일 2정, 식후 복용',
                    '보관 방법': '직사광선을 피해 서늘한 곳에 보관',
                    '인증': 'GMP, HACCP, ISO 9001 인증'
                },
                benefits: [
                    '자연 유래 성분으로 안전하게 설계',
                    '민감한 체질에도 부담 없는 순한 성분',
                    '신체 밸런스 조절 및 유지',
                    '무첨가, 무방부제'
                ]
            },
            {
                id: 2,
                name: '프리미엄 프로바이오틱스',
                description: '고농도 유산균과 프리바이오틱스 복합제',
                price: 129000,
                image: 'PRODUCT 2'
            },
            {
                id: 3,
                name: '오메가-3 프리미엄',
                description: '순수 어유 추출 고농도 오메가-3',
                price: 149000,
                image: 'PRODUCT 3'
            },
            {
                id: 4,
                name: '비타민 D3+K2',
                description: '칼슘 흡수 촉진을 위한 비타민 복합제',
                price: 69000,
                image: 'PRODUCT 4'
            }
        ];

        // 탭 전환
        function switchTab(tab) {
            const tabs = document.querySelectorAll('.auth-tab');
            const forms = document.querySelectorAll('.auth-form');
            
            tabs.forEach(t => t.classList.remove('active'));
            forms.forEach(f => f.classList.remove('active'));
            
            var modalEl = document.querySelector('#loginModal .modal');
            if (tab === 'login') {
                tabs[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
                if (modalEl) modalEl.classList.remove('register-active');
            } else {
                tabs[1].classList.add('active');
                document.getElementById('registerForm').classList.add('active');
                if (modalEl) modalEl.classList.add('register-active');
            }
        }

        // 로그인 모달 열기
        // 메이딘 카카오톡 채널 문의 (채널 URL은 추후 교체)
        function openKakaoChat() {
            var url = 'https://pf.kakao.com/_MAYDIN'; // TODO: 실제 카카오 채널 ID로 변경
            if (window.confirm('메이딘 카카오톡 채널로 이동할까요?')) {
                window.open(url, '_blank', 'noopener');
            }
        }
        function openLoginModal() {
            document.getElementById('loginModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // 로그인 모달 닫기
        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
            document.body.style.overflow = '';
            document.getElementById('loginForm').reset();
            document.getElementById('registerForm').reset();
            var bizFn = document.getElementById('bizCertFileName');
            var licFn = document.getElementById('licenseCertFileName');
            if (bizFn) bizFn.textContent = '';
            if (licFn) licFn.textContent = '';
            document.querySelector('#loginModal .modal').classList.remove('register-active');
            switchTab('login');
        }

        // 모달 오버레이 클릭 시 닫기
        function closeModalOnOverlay(event) {
            if (event.target.id === 'loginModal') {
                closeLoginModal();
            }
        }

        // 약관 보기 모달
        const termsContent = {
            membership: { title: '회원가입약관', body: '제1조 (목적)\n본 약관은 MAYDIN(이하 "회사")가 제공하는 약사전용몰 서비스 이용과 관련하여 회사와 이용자 간의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다.\n\n제2조 (정의)\n① "서비스"란 회사가 제공하는 약사전용몰 및 관련 서비스를 말합니다.\n② "이용자"란 본 약관에 따라 회사가 제공하는 서비스를 받는 회원을 말합니다.\n\n(이하 약관 전문은 별도 문서로 관리됩니다. 실제 서비스 운영 시 법률 자문을 받아 완성된 약관을 등록해 주세요.)' },
            privacy: { title: '개인정보 수집·이용 동의', body: 'MAYDIN(이하 "회사")는 개인정보 보호법에 따라 이용자의 개인정보 수집·이용에 관한 사항을 다음과 같이 안내드립니다.\n\n1. 수집 항목: 성명, 약사면허번호, 연락처, 이메일, 사업자등록번호, 약국 정보 등\n2. 수집 목적: 회원 가입, 본인 확인, 서비스 제공, 세금계산서 발행, 고객 상담\n3. 보유 기간: 회원 탈퇴 시까지 (관련 법령에 따른 보존 기간이 있는 경우 해당 기간)\n4. 제3자 제공: 서비스 제공을 위해 필요한 범위 내에서 제3자(위탁업체 포함)에게 제공할 수 있습니다.\n\n(실제 서비스 운영 시 법률 자문을 받아 완성된 개인정보처리방침을 등록해 주세요.)' },
            trade: { title: '메이딘 거래 규정', body: '제1조 (적용 범위)\n본 거래 규정은 MAYDIN 제품의 약사전용몰 거래에 적용됩니다.\n\n제2조 (주문 및 결제)\n① 주문은 회사가 정한 절차에 따라 진행됩니다.\n② 결제는 회사가 지정한 수단으로 진행됩니다.\n\n제3조 (배송)\n① 배송 기간은 주문 확인 후 영업일 기준으로 안내됩니다.\n② 천재지변 등 불가피한 사유로 지연 시 사전 안내합니다.\n\n(실제 서비스 운영 시 거래 규정 전문을 등록해 주세요.)' }
        };
        function openTermsModal(type) {
            var t = termsContent[type];
            if (!t) return;
            document.getElementById('termsModalTitle').textContent = t.title;
            document.getElementById('termsModalBody').textContent = t.body;
            document.getElementById('termsModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        function closeTermsModal() {
            document.getElementById('termsModal').classList.remove('active');
            document.body.style.overflow = '';
        }
        function closeTermsModalOnOverlay(event) {
            if (event.target.id === 'termsModal') closeTermsModal();
        }

        // 약사전용몰 네비게이션 클릭 처리
        function handlePharmacyNav(event) {
            if (!currentUser) {
                event.preventDefault();
                openLoginModal();
            } else {
                document.getElementById('pharmacy').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // 로그인 처리
        // TODO: API 연결 - POST /api/auth/login
        async function handleLogin(event) {
            event.preventDefault();
            const license = document.getElementById('loginLicense').value;
            const password = document.getElementById('loginPassword').value;
            
            // 임시: 로컬 스토리지 확인 (나중에 API로 대체)
            // API 연결 예시:
            // try {
            //     const response = await fetch('/api/auth/login', {
            //         method: 'POST',
            //         headers: { 'Content-Type': 'application/json' },
            //         body: JSON.stringify({ license, password })
            //     });
            //     const data = await response.json();
            //     if (data.success) {
            //         currentUser = data.user;
            //         localStorage.setItem('token', data.token);
            //         updateNavAfterLogin();
            //         closeLoginModal();
            //         showPharmacySection();
            //     }
            // } catch (error) { ... }
            
            const users = JSON.parse(localStorage.getItem('pharmacyUsers') || '[]');
            const user = users.find(u => u.license === license && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(user));
                updateNavAfterLogin();
                closeLoginModal();
                showPharmacySection();
                alert('로그인 성공!');
            } else {
                alert('면허번호 또는 비밀번호가 올바르지 않습니다.');
            }
        }

        // 네비게이션 업데이트 (로그인 후)
        function updateNavAfterLogin() {
            document.getElementById('navAuth').classList.add('hidden');
            document.getElementById('userInfo').classList.remove('hidden');
            document.getElementById('userName').textContent = currentUser.name + ' 약사님';
        }

        // 네비게이션 업데이트 (로그아웃 후)
        function updateNavAfterLogout() {
            document.getElementById('navAuth').classList.remove('hidden');
            document.getElementById('userInfo').classList.add('hidden');
        }

        // 회원가입 버튼 클릭 시 모달 열고 회원가입 탭으로
        function openRegisterModal() {
            openLoginModal();
            switchTab('register');
        }

        // 로그아웃 처리
        function handleLogout() {
            if (confirm('로그아웃 하시겠습니까?')) {
                currentUser = null;
                cart = [];
                localStorage.removeItem('currentUser');
                updateNavAfterLogout();
                hidePharmacySection();
                alert('로그아웃 되었습니다.');
            }
        }

        // 약사전용몰 섹션 표시
        function showPharmacySection() {
            document.getElementById('pharmacy').classList.add('active');
            showProducts();
        }

        // 약사전용몰 섹션 숨기기
        function hidePharmacySection() {
            document.getElementById('pharmacy').classList.remove('active');
        }

        // 회원가입 처리 (약사 전용: 동의·세금이메일·약국정보·서류 업로드)
        // TODO: API 연결 시 FormData로 파일 전송
        async function handleRegister(event) {
            event.preventDefault();

            if (!document.getElementById('agreeAge').checked) {
                alert('만 14세 이상 동의가 필요합니다.');
                return;
            }
            if (!document.getElementById('agreeTrade').checked) {
                alert('메이딘 거래 규정에 동의해 주세요.');
                return;
            }
            if (!document.getElementById('agreeTerms').checked) {
                alert('회원가입약관에 동의해 주세요.');
                return;
            }
            if (!document.getElementById('agreePrivacy').checked) {
                alert('개인정보 수집·이용에 동의해 주세요.');
                return;
            }

            var bizCert = document.getElementById('registerBizCert');
            var licenseCert = document.getElementById('registerLicenseCert');
            if (!bizCert.files || !bizCert.files.length) {
                alert('사업자등록증 사본을 업로드해 주세요.');
                return;
            }
            if (!licenseCert.files || !licenseCert.files.length) {
                alert('약사면허증 사본을 업로드해 주세요.');
                return;
            }

            var emailOptIn = document.querySelector('input[name="emailOptIn"]:checked');
            var user = {
                license: document.getElementById('registerLicense').value.trim(),
                name: document.getElementById('registerName').value.trim(),
                email: document.getElementById('registerEmail').value.trim(),
                password: document.getElementById('registerPassword').value,
                phone: document.getElementById('registerPhone').value.trim(),
                taxEmail: document.getElementById('registerTaxEmail').value.trim(),
                emailOptIn: emailOptIn ? emailOptIn.value : 'yes',
                bizNo: document.getElementById('registerBizNo').value.trim(),
                pharmacyCode: document.getElementById('registerPharmacyCode').value.trim(),
                pharmacyName: document.getElementById('registerPharmacyName').value.trim(),
                pharmacyUniv: document.getElementById('registerPharmacyUniv').value.trim(),
                joinPath: document.getElementById('registerJoinPath').value.trim(),
                bizCertFileName: bizCert.files[0].name,
                licenseCertFileName: licenseCert.files[0].name
            };

            var users = JSON.parse(localStorage.getItem('pharmacyUsers') || '[]');
            users.push(user);
            localStorage.setItem('pharmacyUsers', JSON.stringify(users));

            alert('회원가입이 완료되었습니다. 로그인해 주세요.');
            switchTab('login');
            document.getElementById('registerForm').reset();
            document.getElementById('bizCertFileName').textContent = '';
            document.getElementById('licenseCertFileName').textContent = '';
        }

        function checkBizNoDuplicate() {
            var bizNo = document.getElementById('registerBizNo').value.trim();
            if (!bizNo) { alert('사업자번호를 입력한 뒤 중복확인해 주세요.'); return; }
            // TODO: API로 중복 검사
            alert('사업자번호 중복확인은 서비스 연동 후 제공됩니다.');
        }
        function checkLicenseDuplicate() {
            var license = document.getElementById('registerLicense').value.trim();
            if (!license) { alert('약사 면허번호를 입력한 뒤 중복확인해 주세요.'); return; }
            var users = JSON.parse(localStorage.getItem('pharmacyUsers') || '[]');
            if (users.some(function(u) { return u.license === license; })) {
                alert('이미 가입된 면허번호입니다.');
                return;
            }
            alert('사용 가능한 면허번호입니다.');
        }

        // 제품 목록 표시
        // TODO: API 연결 - GET /api/products
        async function showProducts() {
            // API 연결 예시:
            // try {
            //     const response = await fetch('/api/products', {
            //         headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
            //     });
            //     products = await response.json();
            // } catch (error) { ... }
            
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = products.map(product => `
                <div class="product-card clickable" onclick="openProductDetail(${product.id})">
                    <div class="product-image">${product.image}</div>
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <p>${product.description}</p>
                        <div class="product-price">${product.price.toLocaleString()}원</div>
                        <div class="product-actions">
                            <button class="btn-secondary" onclick="event.stopPropagation(); addToCart(${product.id})">장바구니</button>
                            <button class="btn-secondary" onclick="event.stopPropagation(); viewOrder()">주문하기</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // 장바구니에 추가
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                cart.push(product);
                updateCart();
                alert(`${product.name}이(가) 장바구니에 추가되었습니다.`);
            }
        }

        // 주문 섹션 보기
        function viewOrder() {
            document.getElementById('orderSection').classList.add('active');
            document.getElementById('orderSection').scrollIntoView({ behavior: 'smooth' });
            updateCart();
        }

        // 장바구니 업데이트
        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            
            cartItems.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-info">
                        <h4>${item.name}</h4>
                        <p>${item.description}</p>
                    </div>
                    <div class="cart-item-price">${item.price.toLocaleString()}원</div>
                </div>
            `).join('') || '<p class="text-center" style="opacity: 0.6;">장바구니가 비어있습니다.</p>';
            
            document.getElementById('subtotal').textContent = subtotal.toLocaleString() + '원';
            document.getElementById('total').textContent = subtotal.toLocaleString() + '원';
        }

        // 주문 처리
        // TODO: API 연결 - POST /api/orders
        // TODO: 이메일 발송 - POST /api/email/send-order-confirmation
        async function handleOrder() {
            if (cart.length === 0) {
                alert('장바구니가 비어있습니다.');
                return;
            }
            
            const order = {
                userId: currentUser.license,
                userEmail: currentUser.email,
                items: cart,
                total: cart.reduce((sum, item) => sum + item.price, 0),
                date: new Date().toISOString()
            };
            
            // API 연결 예시:
            // try {
            //     const response = await fetch('/api/orders', {
            //         method: 'POST',
            //         headers: { 
            //             'Content-Type': 'application/json',
            //             'Authorization': `Bearer ${localStorage.getItem('token')}`
            //         },
            //         body: JSON.stringify(order)
            //     });
            //     const data = await response.json();
            //     if (data.success) {
            //         // 이메일 발송
            //         await fetch('/api/email/send-order-confirmation', {
            //             method: 'POST',
            //             headers: { 'Content-Type': 'application/json' },
            //             body: JSON.stringify({ orderId: data.orderId, email: currentUser.email })
            //         });
            //         alert('주문이 완료되었습니다! 확인 이메일을 발송했습니다.');
            //         cart = [];
            //         updateCart();
            //     }
            // } catch (error) { ... }
            
            // 임시: 로컬 스토리지 저장
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            alert('주문이 완료되었습니다! (나중에 이메일 발송 기능 추가 예정)');
            cart = [];
            updateCart();
        }

        // 페이지 로드 시 로그인 상태 확인 및 카드 hover 이벤트 초기화
        window.addEventListener('DOMContentLoaded', () => {
            // 카카오 로그인 SDK 초기화 (제공 키 사용)
            if (typeof Kakao !== 'undefined' && !Kakao.isInitialized()) {
                Kakao.init('87f6c996d0f83fd42534d1a8a391e6b0');
            }
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateNavAfterLogin();
                showPharmacySection();
            } else {
                updateNavAfterLogout();
            }
            // 히어로 4장 슬라이더: 자동 재생 + 점 클릭
            (function() {
                var banner = document.getElementById('heroBanner');
                if (!banner) return;
                var slides = banner.querySelectorAll('.hero-slide');
                var dots = banner.querySelectorAll('.slider-dots .dot');
                var current = 0;
                var total = slides.length;
                var autoTimer = null;
                var interval = 5000;

                function goToSlide(index) {
                    if (index < 0 || index >= total) return;
                    current = index;
                    slides.forEach(function(s, i) { s.classList.toggle('active', i === current); });
                    dots.forEach(function(d, i) { d.classList.toggle('active', i === current); });
                }

                function nextSlide() { goToSlide((current + 1) % total); }

                dots.forEach(function(dot) {
                    dot.addEventListener('click', function() {
                        var idx = parseInt(dot.getAttribute('data-index'), 10);
                        goToSlide(idx);
                        if (autoTimer) clearInterval(autoTimer);
                        autoTimer = setInterval(nextSlide, interval);
                    });
                });

                autoTimer = setInterval(nextSlide, interval);
            })();
        });

        // 카카오 간편 로그인/회원가입 (리다이렉트 방식)
        function handleKakaoLogin() {
            if (typeof Kakao === 'undefined' || !Kakao.isInitialized()) {
                alert('카카오 로그인을 불러오는 중입니다. 잠시 후 다시 시도해 주세요.');
                return;
            }
            var base = location.origin + location.pathname;
            if (base.endsWith('index.html')) base = base.replace(/index\.html$/, '');
            else if (!base.endsWith('/')) base = base.substring(0, base.lastIndexOf('/') + 1);
            var redirectUri = base + (base.endsWith('/') ? '' : '/') + 'kakao-callback.html';
            Kakao.Auth.authorize({
                redirectUri: redirectUri,
                scope: 'profile_nickname,account_email'
            });
        }

        // 구글 로그인 처리
        // TODO: 구글 API 연결 - Google OAuth 2.0 연동
        function handleGoogleLogin() {
            // 구글 로그인 API 연결 예시:
            // gapi.load('auth2', function() {
            //     gapi.auth2.init({
            //         client_id: 'YOUR_GOOGLE_CLIENT_ID'
            //     }).then(function() {
            //         const authInstance = gapi.auth2.getAuthInstance();
            //         authInstance.signIn().then(async function(googleUser) {
            //             const profile = googleUser.getBasicProfile();
            //             const googleUserData = {
            //                 id: profile.getId(),
            //                 email: profile.getEmail(),
            //                 name: profile.getName(),
            //                 provider: 'google'
            //             };
            //             // 백엔드 API로 구글 사용자 정보 전송
            //             const response = await fetch('/api/auth/google', {
            //                 method: 'POST',
            //                 headers: { 'Content-Type': 'application/json' },
            //                 body: JSON.stringify(googleUserData)
            //             });
            //             const data = await response.json();
            //             if (data.success) {
            //                 currentUser = data.user;
            //                 localStorage.setItem('token', data.token);
            //                 updateNavAfterLogin();
            //                 closeLoginModal();
            //                 showPharmacySection();
            //             }
            //         });
            //     });
            // });
            
            alert('구글 로그인 기능은 준비 중입니다. (API 연결 필요)');
        }

        // 제품 상세 모달 열기
        function openProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            document.getElementById('detailProductName').textContent = product.name;
            
            const detailBody = document.getElementById('productDetailBody');
            const specsHtml = product.specs ? Object.entries(product.specs).map(([key, value]) => `
                <div class="spec-item">
                    <span class="spec-label">${key}</span>
                    <span class="spec-value">${value}</span>
                </div>
            `).join('') : '';

            const benefitsHtml = product.benefits ? product.benefits.map(benefit => `
                <li style="margin-bottom: 10px; opacity: 0.8;">${benefit}</li>
            `).join('') : '';

            const imageHtml = product.id === 1
                ? `<div class="product-detail-image"><img src="assets/sensibee-rendering.png" alt="${product.name}" class="product-detail-img"></div>`
                : `<div class="product-detail-image">${product.image}</div>`;

            detailBody.innerHTML = `
                ${imageHtml}
                <div class="product-detail-info">
                    <h3>${product.name}</h3>
                    <div class="product-detail-description">
                        ${product.fullDescription || product.description}
                    </div>
                </div>
                ${product.specs ? `
                <div class="product-detail-specs">
                    <h4>제품 정보</h4>
                    ${specsHtml}
                </div>
                ` : ''}
                ${product.benefits ? `
                <div class="product-detail-specs">
                    <h4>주요 효과</h4>
                    <ul style="list-style: none; padding: 0;">
                        ${benefitsHtml}
                    </ul>
                </div>
                ` : ''}
                <div class="product-detail-actions">
                    ${currentUser ? `
                        <button class="btn-primary" onclick="addToCartFromDetail(${product.id})">장바구니에 추가</button>
                        <button class="btn-secondary" onclick="viewOrderFromDetail()">주문하기</button>
                    ` : `
                        <button class="btn-primary" onclick="openLoginModal(); closeProductDetail();">로그인 후 구매하기</button>
                    `}
                </div>
            `;

            document.getElementById('productDetailModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // 제품 상세 모달 닫기
        function closeProductDetail() {
            document.getElementById('productDetailModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // 모달 오버레이 클릭 시 닫기
        function closeProductDetailOnOverlay(event) {
            if (event.target.id === 'productDetailModal') {
                closeProductDetail();
            }
        }
        function openPamphletModal() {
            document.getElementById('pamphletModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        function closePamphletModal() {
            document.getElementById('pamphletModal').classList.remove('active');
            document.body.style.overflow = '';
        }
        function closePamphletOnOverlay(event) {
            if (event.target.id === 'pamphletModal') {
                closePamphletModal();
            }
        }

        // 상세 페이지에서 장바구니 추가
        function addToCartFromDetail(productId) {
            addToCart(productId);
            closeProductDetail();
        }

        // 상세 페이지에서 주문 보기
        function viewOrderFromDetail() {
            closeProductDetail();
            if (currentUser) {
                viewOrder();
            } else {
                openLoginModal();
            }
        }

        // ESC 키로 모달 닫기
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeLoginModal();
                closeProductDetail();
                closeRndModal();
                closePamphletModal();
                closeTermsModal();
            }
        });


        // 상단으로 스크롤
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 인증 카드 스크롤 애니메이션
        const trustCards = document.querySelectorAll('.trust-card');
        const trustObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry, index) => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.classList.add('show');
                    }, index * 150); // 순차적으로 나타나도록
                }
            });
        }, { threshold: 0.1 });

        trustCards.forEach(card => trustObserver.observe(card));


        // 소식 상세 보기 (나중에 구현)
        function openNewsDetail(newsId) {
            // TODO: 소식 상세 모달 또는 페이지 구현
            console.log('소식 상세:', newsId);
            // 예시: alert('소식 상세 페이지는 준비 중입니다.');
        }

        // R&D 프로세스 데이터
        const rndData = {
            "01": {
                title: "원료 선정",
                desc: "메이딘은 전 세계 원산지를 직접 추적하여 유효 성분 함량이 가장 높은 시기의 원료만을 채집합니다.",
                details: [
                    "전 성분 원산지 100% 공개",
                    "중금속 및 잔류 농약 검사 통과",
                    "유전자 변형 없는(Non-GMO) 원료 엄선"
                ]
            },
            "02": {
                title: "연구 · 검증",
                desc: "단순 배합을 넘어, 분자 구조 단위에서 성분의 흡수율을 극대화하는 배합 설계 기술을 보유하고 있습니다.",
                details: [
                    "독자적 성분 배합 설계 기술",
                    "대학 병원 연계 임상 데이터 확보",
                    "국제 학술지 논문 근거 기반 설계"
                ]
            },
            "03": {
                title: "제조",
                desc: "무결점 클린룸 시스템에서 모든 공정이 이루어지며, 외부 오염을 완벽히 차단합니다.",
                details: [
                    "GMP 인증 전용 라인 생산",
                    "24시간 온/습도 자동 제어 시스템",
                    "Batch별 제조 이력 추적 시스템"
                ]
            },
            "04": {
                title: "품질 관리",
                desc: "우리의 기준은 법적 기준보다 높습니다. 모든 완제품은 3단계 정밀 검사를 거쳐야만 출고될 수 있습니다.",
                details: [
                    "HACCP 및 ISO 9001 기준 준수",
                    "출하 전 전수 정밀 검사 실시",
                    "고객 경험 기반 품질 피드백 시스템"
                ]
            }
        };

        // R&D 모달 열기
        function openRndModal(stepNum = "01") {
            const modal = document.getElementById('rnd-modal');
            const data = rndData[stepNum];

            if (!data) return;

            // 데이터 반영
            document.getElementById('modal-step-tag').textContent = `STEP ${stepNum}`;
            document.getElementById('modal-title').textContent = data.title;
            document.getElementById('modal-desc').textContent = data.desc;
            
            const listContainer = document.getElementById('modal-list');
            listContainer.innerHTML = data.details.map(item => `<li>${item}</li>`).join('');

            // 모달 열기
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            setTimeout(() => modal.classList.add('active'), 10);

            // 단계 선택 버튼 추가 (선택사항)
            addStepButtons(stepNum);
        }

        // 단계 선택 버튼 추가
        function addStepButtons(currentStep) {
            const modalVisual = document.getElementById('modal-img');
            let buttonsHtml = modalVisual.querySelector('.step-buttons');
            
            if (!buttonsHtml) {
                buttonsHtml = document.createElement('div');
                buttonsHtml.className = 'step-buttons';
                buttonsHtml.style.cssText = 'position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px;';
                modalVisual.appendChild(buttonsHtml);
            }

            buttonsHtml.innerHTML = Object.keys(rndData).map(step => `
                <button onclick="event.stopPropagation(); openRndModal('${step}')" 
                        style="width: 40px; height: 40px; border-radius: 50%; border: 2px solid ${step === currentStep ? 'white' : 'rgba(255,255,255,0.5)'}; 
                               background: ${step === currentStep ? 'white' : 'transparent'}; 
                               color: ${step === currentStep ? 'var(--accent)' : 'white'}; 
                               font-weight: 800; cursor: pointer; transition: all 0.3s;"
                        onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                        onmouseout="this.style.background='${step === currentStep ? 'white' : 'transparent'}'">
                    ${step}
                </button>
            `).join('');
        }

        // R&D 모달 닫기
        function closeRndModal() {
            const modal = document.getElementById('rnd-modal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
            setTimeout(() => {
                modal.style.display = 'none';
            }, 500);
        }

        // 배경 클릭 시 닫기
        function closeRndModalOnOverlay(event) {
            if (event.target.id === 'rnd-modal') {
                closeRndModal();
            }
        }

        // 제휴 약국 지도 관련
        let map = null;
        let markers = [];
        let geocoder = null;
        let currentPosition = null;

        // 제휴 약국 데이터 (나중에 API로 대체)
        const partnerPharmacies = [
            {
                id: 1,
                name: '건강약국',
                address: '서울특별시 강남구 테헤란로 123',
                lat: 37.5665,
                lng: 127.0780,
                phone: '02-1234-5678',
                hours: '09:00 - 21:00'
            },
            {
                id: 2,
                name: '메이딘 약국',
                address: '서울특별시 서초구 서초대로 456',
                lat: 37.4837,
                lng: 127.0324,
                phone: '02-2345-6789',
                hours: '09:00 - 20:00'
            },
            {
                id: 3,
                name: '프리미엄 약국',
                address: '서울특별시 송파구 올림픽로 789',
                lat: 37.5145,
                lng: 127.1050,
                phone: '02-3456-7890',
                hours: '08:30 - 21:30'
            },
            {
                id: 4,
                name: '자연약국',
                address: '경기도 성남시 분당구 정자동 101',
                lat: 37.3595,
                lng: 127.1086,
                phone: '031-1234-5678',
                hours: '09:00 - 20:00'
            },
            {
                id: 5,
                name: '센시비 약국',
                address: '인천광역시 연수구 송도동 202',
                lat: 37.3886,
                lng: 126.6588,
                phone: '032-1234-5678',
                hours: '09:00 - 21:00'
            }
        ];

        // 지도 초기화 (Kakao SDK load 콜백 사용 + 실패 시 폴백)
        function initMap() {
            const container = document.getElementById('map');
            if (!container) return;

            function showMapFallback() {
                container.innerHTML = `
                    <div class="map-fallback">
                        <p class="fallback-title">지도를 불러올 수 없습니다</p>
                        <p class="fallback-desc">
                            카카오맵 API 도메인 제한이거나, 키가 JavaScript 키가 아닐 수 있습니다.
                        </p>
                        <p class="fallback-desc">
                            오른쪽 <strong>제휴 약국 목록</strong>에서 <strong>「카카오맵」「구글맵」</strong> 버튼으로 위치를 확인하세요.
                        </p>
                        <p class="fallback-hint">
                            <a href="https://github.com/baeshh/maydin/blob/main/docs/KAKAO_MAP_SETUP.md" target="_blank" rel="noopener">지도 설정 방법</a><br>
                            • <strong>로컬(8080)</strong>: Kakao 콘솔 Web 도메인에 <code>http://localhost:8080</code> 추가<br>
                            • <strong>배포</strong>: <code>https://baeshh.github.io</code> 등록 + JavaScript 키 확인
                        </p>
                    </div>
                `;
                displayPharmacyList();
            }

            if (typeof kakao === 'undefined' || !kakao.maps) {
                showMapFallback();
                return;
            }

            // SDK가 완전히 준비된 뒤 지도 생성 (도메인 미등록 시 load에서 실패할 수 있음)
            var loadTimeout = setTimeout(function() {
                if (!map) showMapFallback();
            }, 8000);

            function doInitMap() {
                var options = {
                    center: new kakao.maps.LatLng(37.5665, 127.0780),
                    level: 5
                };
                try {
                    map = new kakao.maps.Map(container, options);
                    geocoder = new kakao.maps.services.Geocoder();
                    displayPharmacies();
                    displayPharmacyList();
                    clearTimeout(loadTimeout);
                } catch (e) {
                    showMapFallback();
                    clearTimeout(loadTimeout);
                }
            }

            if (typeof kakao.maps.load === 'function') {
                kakao.maps.load(doInitMap);
            } else {
                doInitMap();
            }
        }

        // 약국 마커 표시
        function displayPharmacies() {
            if (!map) return;

            // 기존 마커 제거
            markers.forEach(marker => marker.setMap(null));
            markers = [];

            partnerPharmacies.forEach(pharmacy => {
                const markerPosition = new kakao.maps.LatLng(pharmacy.lat, pharmacy.lng);
                
                // 커스텀 마커 이미지 (선택사항)
                const markerImage = new kakao.maps.MarkerImage(
                    'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png',
                    new kakao.maps.Size(30, 30),
                    { offset: new kakao.maps.Point(15, 30) }
                );

                const marker = new kakao.maps.Marker({
                    position: markerPosition,
                    image: markerImage,
                    map: map
                });

                // 인포윈도우
                const infowindow = new kakao.maps.InfoWindow({
                    content: `
                        <div style="padding: 10px; min-width: 200px;">
                            <h4 style="font-weight: 800; margin-bottom: 8px; color: var(--accent);">${pharmacy.name}</h4>
                            <p style="font-size: 0.85rem; margin-bottom: 5px; opacity: 0.7;">${pharmacy.address}</p>
                            <p style="font-size: 0.85rem; font-weight: 700;">${pharmacy.phone}</p>
                            <p style="font-size: 0.8rem; opacity: 0.6;">${pharmacy.hours}</p>
                        </div>
                    `
                });

                kakao.maps.event.addListener(marker, 'click', function() {
                    infowindow.open(map, marker);
                    // 약국 목록에서 해당 약국 강조
                    highlightPharmacy(pharmacy.id);
                });

                markers.push(marker);
            });

            // 모든 마커가 보이도록 지도 범위 조정
            const bounds = new kakao.maps.LatLngBounds();
            partnerPharmacies.forEach(pharmacy => {
                bounds.extend(new kakao.maps.LatLng(pharmacy.lat, pharmacy.lng));
            });
            map.setBounds(bounds);
        }

        // 외부 지도에서 열기 (지도 API 미동작 시 활용)
        function openPharmacyInKakaoMap(address) {
            window.open('https://map.kakao.com/?q=' + encodeURIComponent(address), '_blank', 'noopener');
        }
        function openPharmacyInGoogleMaps(address) {
            window.open('https://www.google.com/maps/search/?api=1&query=' + encodeURIComponent(address), '_blank', 'noopener');
        }

        // 약국 목록 표시 (카카오맵/구글맵 링크 포함)
        function displayPharmacyList() {
            const listContainer = document.getElementById('pharmacyList');
            if (!listContainer) return;
            listContainer.innerHTML = partnerPharmacies.map(pharmacy => `
                <div class="pharmacy-item" onclick="focusPharmacy(${pharmacy.id})" data-pharmacy-id="${pharmacy.id}">
                    <h4>${pharmacy.name}</h4>
                    <p>${pharmacy.address}</p>
                    <p class="phone">${pharmacy.phone}</p>
                    <p style="font-size: 0.85rem; opacity: 0.5;">${pharmacy.hours}</p>
                    <div class="map-links" onclick="event.stopPropagation();">
                        <a href="https://map.kakao.com/?q=${encodeURIComponent(pharmacy.address)}" target="_blank" rel="noopener" class="link-kakao">카카오맵</a>
                        <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(pharmacy.address)}" target="_blank" rel="noopener" class="link-google">구글맵</a>
                    </div>
                </div>
            `).join('');
        }

        // 약국 포커스 (지도 없을 때는 목록에서만 강조 + 스크롤)
        function focusPharmacy(pharmacyId) {
            const pharmacy = partnerPharmacies.find(p => p.id === pharmacyId);
            if (!pharmacy) return;

            if (map && typeof kakao !== 'undefined') {
                const position = new kakao.maps.LatLng(pharmacy.lat, pharmacy.lng);
                map.setCenter(position);
                map.setLevel(3);
                const marker = markers[pharmacyId - 1];
                if (marker) {
                    const infowindow = new kakao.maps.InfoWindow({
                        content: `
                            <div style="padding: 10px; min-width: 200px;">
                                <h4 style="font-weight: 800; margin-bottom: 8px; color: var(--accent);">${pharmacy.name}</h4>
                                <p style="font-size: 0.85rem; margin-bottom: 5px; opacity: 0.7;">${pharmacy.address}</p>
                                <p style="font-size: 0.85rem; font-weight: 700;">${pharmacy.phone}</p>
                                <p style="font-size: 0.8rem; opacity: 0.6;">${pharmacy.hours}</p>
                            </div>
                        `
                    });
                    infowindow.open(map, marker);
                }
            }

            highlightPharmacy(pharmacyId);
        }

        // 약국 강조
        function highlightPharmacy(pharmacyId) {
            const items = document.querySelectorAll('.pharmacy-item');
            items.forEach((item, index) => {
                if (partnerPharmacies[index].id === pharmacyId) {
                    item.style.background = 'rgba(45, 90, 76, 0.1)';
                    item.style.borderLeft = '3px solid var(--accent)';
                    item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                } else {
                    item.style.background = '';
                    item.style.borderLeft = '';
                }
            });
        }

        // 약국 검색
        function searchPharmacy() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) {
                alert('검색어를 입력해주세요.');
                return;
            }

            // 약국명 또는 주소로 검색
            const results = partnerPharmacies.filter(pharmacy => 
                pharmacy.name.includes(query) || 
                pharmacy.address.includes(query)
            );

            if (results.length === 0) {
                alert('검색 결과가 없습니다.');
                return;
            }

            // 첫 번째 결과로 이동
            focusPharmacy(results[0].id);

            // 검색 결과만 필터링하여 표시 (카카오맵/구글맵 링크 포함)
            const listContainer = document.getElementById('pharmacyList');
            listContainer.innerHTML = results.map(pharmacy => `
                <div class="pharmacy-item" onclick="focusPharmacy(${pharmacy.id})" data-pharmacy-id="${pharmacy.id}">
                    <h4>${pharmacy.name}</h4>
                    <p>${pharmacy.address}</p>
                    <p class="phone">${pharmacy.phone}</p>
                    <p style="font-size: 0.85rem; opacity: 0.5;">${pharmacy.hours}</p>
                    <div class="map-links" onclick="event.stopPropagation();">
                        <a href="https://map.kakao.com/?q=${encodeURIComponent(pharmacy.address)}" target="_blank" rel="noopener" class="link-kakao">카카오맵</a>
                        <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(pharmacy.address)}" target="_blank" rel="noopener" class="link-google">구글맵</a>
                    </div>
                </div>
            `).join('');
        }

        // 현재 위치로 찾기 (지도 없어도 가장 가까운 약국 안내)
        function getCurrentLocation() {
            if (!navigator.geolocation) {
                alert('이 브라우저는 위치 서비스를 지원하지 않습니다.');
                return;
            }

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    currentPosition = { lat, lng };

                    let nearestPharmacy = null;
                    let minDistance = Infinity;
                    partnerPharmacies.forEach(pharmacy => {
                        const distance = getDistance(lat, lng, pharmacy.lat, pharmacy.lng);
                        if (distance < minDistance) {
                            minDistance = distance;
                            nearestPharmacy = pharmacy;
                        }
                    });

                    if (map && typeof kakao !== 'undefined') {
                        const currentPos = new kakao.maps.LatLng(lat, lng);
                        map.setCenter(currentPos);
                        map.setLevel(3);
                        new kakao.maps.Marker({ position: currentPos, map: map });
                    }

                    if (nearestPharmacy) {
                        focusPharmacy(nearestPharmacy.id);
                        alert(`가장 가까운 약국: ${nearestPharmacy.name} (약 ${Math.round(minDistance)}km)\n\n지도가 보이지 않을 경우 오른쪽 목록에서 해당 약국의 「카카오맵」 또는 「구글맵」으로 위치를 확인하세요.`);
                    }
                },
                (error) => {
                    alert('위치 정보를 가져올 수 없습니다. 위치 권한을 확인해주세요.');
                }
            );
        }

        // 두 지점 간 거리 계산 (km)
        function getDistance(lat1, lng1, lat2, lng2) {
            const R = 6371; // 지구 반지름 (km)
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLng / 2) * Math.sin(dLng / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c;
        }

        // 검색 입력창에서 Enter 키 처리
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        searchPharmacy();
                    }
                });
            }
            initMap();
        });
    </script>
</body>
</html>
