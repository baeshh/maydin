# 배포 사이트에서 지도가 안 뜰 때 해결 방법

GitHub Pages 등으로 배포한 주소(예: `https://baeshh.github.io/maydin`)에서는 **카카오맵 API 도메인 제한** 때문에 지도가 안 나올 수 있습니다. 아래 순서대로 하면 해결됩니다.

---

## 1. Kakao 개발자 콘솔 접속

1. **https://developers.kakao.com** 접속 후 로그인
2. 상단 메뉴에서 **내 애플리케이션** 클릭
3. 사용 중인 앱 선택 (지도용 JavaScript 키가 있는 앱)
   - 앱이 없으면 **애플리케이션 추가하기**로 새로 만든 뒤 진행

---

## 2. Web 플랫폼 도메인 등록

1. 왼쪽 메뉴에서 **앱 설정** → **플랫폼** 클릭
2. **Web** 플랫폼이 있는지 확인
   - 없으면 **Web** 선택 후 **저장**해서 플랫폼 추가
3. **Web** 항목에서 **사이트 도메인**에 아래 주소를 **한 줄에 하나씩** 입력 후 **저장**

   - **배포 사이트** (필수):
     ```
     https://baeshh.github.io
     ```
   - **로컬 테스트** (localhost:8080에서 지도 보려면 추가):
     ```
     http://localhost:8080
     ```

   - 반드시 프로토콜(`https://` 또는 `http://`) 포함
   - 경로(`/maydin` 등)는 넣지 말고 **도메인만** 입력

---

## 3. JavaScript 키 확인

1. 왼쪽 메뉴 **앱 설정** → **앱 키** 클릭
2. **JavaScript 키** 값을 확인
3. 이 키가 `index.html` 7~8번째 줄 근처 script의 `appkey=` 값과 **같은지** 확인  
   - 다르면 `index.html`의 `appkey=` 값을 이 JavaScript 키로 바꿔서 저장 후 다시 배포

---

## 4. 로컬(localhost:8080)에서 지도가 안 뜨는 경우

- **이유**: Kakao Map API는 등록된 도메인에서만 동작합니다. `localhost`는 기본 등록이 아닙니다.
- **해결**: 위 2번에서 **사이트 도메인**에 `http://localhost:8080` 을 **추가**로 입력하고 저장한 뒤, 브라우저 새로고침하면 로컬에서도 지도가 표시됩니다.

## 5. 배포 후 확인

- 저장 후 1~2분 지나서 **https://baeshh.github.io/maydin** 새로고침
- 그래도 안 되면 **캐시 없이 새로고침** (Ctrl+Shift+R 또는 Cmd+Shift+R)

---

## 요약

| 단계 | 할 일 |
|------|--------|
| 1 | developers.kakao.com → 내 애플리케이션 → 앱 선택 |
| 2 | 플랫폼 → Web → 사이트 도메인에 `https://baeshh.github.io` + (로컬 테스트 시) `http://localhost:8080` 입력 후 저장 |
| 3 | 앱 키에서 JavaScript 키가 index.html의 appkey와 같은지 확인 |
| 4 | 배포 사이트 / 로컬 새로고침 후 지도 표시 확인 |

도메인만 위와 같이 등록하면 **배포 사이트**와 **localhost** 모두에서 지도가 정상 표시됩니다.

---

## 카카오 로그인(간편 회원가입) 설정

같은 앱의 **JavaScript 키**로 카카오톡 간편 로그인을 사용하려면 아래 설정이 추가로 필요합니다.

1. **카카오 로그인 활성화**  
   - **제품 설정** → **카카오 로그인** → **활성화 설정**을 **ON**으로 저장

2. **리다이렉트 URI 등록**  
   - **카카오 로그인** → **Redirect URI**에 다음 주소를 등록 후 저장  
     - 배포: `https://baeshh.github.io/maydin/kakao-callback.html`  
     - 로컬 테스트: `http://localhost:8080/kakao-callback.html` (또는 사용 중인 로컬 주소 + `/kakao-callback.html`)

3. **동의항목**  
   - **동의항목**에서 프로필(닉네임), 카카오계정(이메일) 등 필요한 항목을 설정

4. **토큰 발급**  
   - 토큰 요청은 **REST API 키**를 사용합니다. JavaScript 키와 동일한 값이면 그대로 사용 가능한 경우가 있습니다.  
   - 브라우저에서 토큰 요청이 CORS로 차단되면, **백엔드(서버)**에서 인가 코드로 토큰을 받고 사용자 정보를 조회한 뒤, 클라이언트에 결과를 전달하는 방식으로 구현해야 합니다.
